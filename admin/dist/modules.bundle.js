!function(t){var e={};function i(a){if(e[a])return e[a].exports;var n=e[a]={i:a,l:!1,exports:{}};return t[a].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=11)}([,,,,,,,,,,,function(t,e,i){const a={};var n;(n=i(12)).keys().forEach(t=>a[t]=n(t))},function(t,e,i){var a={"./approvalchain.js":13,"./architecture.js":14,"./category.js":15,"./comment.js":16,"./core.js":17,"./dashboard.js":18,"./email.js":19,"./extend.js":20,"./feed.js":21,"./manageData.js":22,"./searchParams.js":23,"./user.js":24};function n(t){var e=o(t);return i(e)}function o(t){if(!i.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}n.keys=function(){return Object.keys(a)},n.resolve=o,t.exports=n,n.id=12},function(t,e){chainManager={setGroupMembershipSort:function(){$("#groupAvailableListSort, #groupAssignmentListSort").sortable({connectWith:".groupDisplayListSortOptions",update:function(t,e){t.stopPropagation(),"groupAssignmentListSort"==e.item.parents("ol:first").attr("id")?e.item.find("input:first").attr("name","groupID"):e.item.find("input:first").attr("name","availableID")}}).disableSelection()}}},function(module,exports){function initConfigurator(t,e){return siteManager.initConfigurator(t,e)}siteManager={formSubmitted:!1,layoutmanager:!1,fileLockConfirmed:!1,hasFileLock:!1,nodeLockConfirmed:!1,hasNodeLock:!1,dirtyRelatedContent:!1,currentModuleID:"",copyContentID:"",copyModuleID:"",copySiteID:"",reloadURL:"",tablist:"",submitDialogs:[],submitActions:[],assigningChangeset:!1,addSubmitDialog:function(t){siteManager.submitDialogs.push(t)},addSubmitAction:function(t){siteManager.submitActions.push(t)},submitContentForm:function(){var t=0,e=siteManager.submitDialogs,i=siteManager.submitActions;!function a(){for(l in CKEDITOR.instances)CKEDITOR.instances[l].updateElement();for(Mura("textarea.mura-markdown,textarea.markdownEditor").forEach((function(){var t=Mura(this);markdownInstances&&(markdownInstances[t.attr("name")],1)&&t.length&&t.val(markdownInstances[t.attr("name")].getValue())})),l=0;l<e.length;l++)if(l==t){var n=e[l];if("confirmation"==n.type.toLowerCase()){if("function"!=typeof n.condition)return confirmDialog($.extend(n,{yesAction:function(){t++,a()}})),!1;var o=function(){t++,a()},r=null;if("function"==typeof n.yesFn&&(o=function(){n.yesFn()&&(t++,a())}),"function"==typeof n.noFn&&(r=function(){n.noFn()&&(t++,a())}),"function"!=typeof n.condition)return confirmDialog($.extend(n,{yesAction:o,noAction:r})),!1;if(n.condition(n))return confirmDialog($.extend(n,{yesAction:o,noAction:r})),!1;t++}else if("alert"==n.type.toLowerCase()){var s=function(){t++,a()};if("function"==typeof n.okFn&&(s=function(){n.okFn()&&(t++,a())}),"function"!=typeof n.condition)return alertDialog($.extend(n,{okAction:s})),!1;if(n.condition(n))return alertDialog($.extend(n,{okAction:s})),!1;t++}else if("validation"==n.type.toLowerCase())if("function"==typeof n.condition){if(n.condition(n)){s=function(){t++,a()};return"function"==typeof n.okFn&&(s=function(){n.okFn()&&(t++,a())}),alertDialog($.extend(n,{okAction:s})),!1}t++}else t++;else t++}if(t==e.length){for(var l=0;l<i.length;l++){var c=i[l]();if("boolean"==typeof c&&!c)return!1}siteManager.assigningChangeset&&($("#changesetID").val(currentChangesetSelection),$("#removePreviousChangeset").val(document.getElementById("_removePreviousChangeset").checked),"other"==currentChangesetSelection?$("#changesetname").val($("#_changesetname").val()):$("#changesetname").val("")),siteManager.formSubmitted=!0,actionModal((function(){document.contentForm.submit()}))}}()},ckContent:function(t,e){if("undefined"!=typeof isFormBuilder&&!siteManager.saveFormBuilder())return alertDialog("All fields must have a 'name' before the form can be saved."),!1;if(void 0!==document.contentForm.display)if("2"==document.contentForm.display.value){var i=$(".datepicker.mura-datepickerdisplayStart").val(),a=$(".datepicker.mura-datepickerdisplayStop").val();if(0==isDate(i,"DISPLAY START DATE"))return alertDialog("Please enter a valid date in the 'Display Start Date' field"),!1;if(""!=a&&0==isDate(a,"DISPLAY STOP DATE"))return alertDialog("Please enter a valid date in the 'Display Stop Date' field"),!1}else $(".datepicker.mura-datepickerdisplayStart").val(""),$(".datepicker.mura-datepickerdisplayStop").val(""),$("#mura-displayStart").val(""),$("#mura-displayStop").val("");return""==document.contentForm.title.value?"Component"==document.contentForm.type.value?(alertDialog("The form field 'Menu Title' is required"),!1):"Form"==document.contentForm.type.value?(alertDialog("The form field 'Title' is required"),!1):(alertDialog("The form field 'Long Title' is required"),!1):"Link"==document.contentForm.type.value&&""==document.contentForm.body.value?(alertDialog("The form field 'URL' is required"),!1):!!validateForm(document.contentForm)&&(!(1==document.contentForm.approved.value&&""!=t&&!confirm(t))&&(void 0!==this.hasFileLock&&!this.fileLockConfirmed&&this.hasFileLock&&""!=$("input[name='newfile']").val()?(confirmDialog(this.unlockfileconfirm,(function(){$("#unlockfilewithnew").val("true"),siteManager.ckContent(!1)&&siteManager.submitContentForm()}),(function(){$("#unlockfilewithnew").val("false"),siteManager.ckContent(!1)&&siteManager.submitContentForm()})),this.fileLockConfirmed=!0,!1):!!e||(void 0!==this.hasNodeLock&&this.hasNodeLock&&!this.nodeLockConfirmed?(confirmDialog(this.unlocknodeconfirm,(function(){$("#unlocknodewithpublish").val("true"),siteManager.ckContent(!1)&&siteManager.submitContentForm()}),(function(){$("#unlocknodewithpublish").val("false"),siteManager.ckContent(!1)&&siteManager.submitContentForm()})),this.nodeLockConfirmed=!0,!1):0==document.contentForm.muraPreviouslyApproved.value&&1==document.contentForm.approved.value?"undefined"!=typeof currentChangesetID&&""!=currentChangesetID?(confirmDialog(publishitemfromchangeset,(function(){siteManager.submitContentForm()})),!1):"undefined"!=pendingApproval&&pendingApproval?(confirmDialog(cancelPendingApproval,(function(){document.contentForm.cancelpendingapproval.value="true",siteManager.submitContentForm()}),(function(){document.contentForm.cancelpendingapproval.value="false",siteManager.submitContentForm()})),!1):(siteManager.submitContentForm(),!1):(siteManager.submitContentForm(),!1))))},DHTML:document.getElementById||document.all||document.layers,lastid:"",getObj:function(t){document.getElementById?(this.obj=document.getElementById(t),this.style=document.getElementById(t).style):document.all?(this.obj=document.all[t],this.style=document.all[t].style):document.layers&&(this.obj=document.layers[t],this.style=document.layers[t])},saveFormBuilder:function(){return!!$("#mura-templatebuilder").templatebuilder("iscomplete")&&(jQuery("#mura-templatebuilder").templatebuilder("save"),!0)},openNewContentMenu:function(t,e,i,a,n,o){return $("#newContentMenuContainer").remove(),$("body").append('<div id="newContentMenuContainer" title="Loading..." style="display:none"><div id="newContentMenu"><div class="load-inline"></div></div></div>'),$("#newContentMenuContainer").dialog({resizable:!1,modal:!0,width:552,title:newContentMenuTitle,position:getDialogPosition(),open:function(){$("#newContentMenuContainer").html('<div class="ui-dialog-content ui-widget-content"><div class="load-inline"></div></div>');var i="muraAction=cArch.loadnewcontentmenu&siteid="+e+"&contentid="+t+"&parentid="+a+"&topid="+a+"&ptype="+n+"&moduleid="+o+"&cacheid="+Math.random();$("#newContentMenuContainer .load-inline").spin(spinnerArgs2),$.get("./?"+i,(function(t){$("#newContentMenuContainer .load-inline").spin(!1),$("#newContentMenuContainer").html(t),$("#newContentMenuContainer").dialog("option","position",{my:"center",at:"center",of:window}),setToolTips(".add-content-ui")}))},close:function(){$(this).dialog("destroy"),$("#newContentMenuContainer").remove()}}),!1},showMenu:function(t,e,i,a,n,o,r,s,l){var c=e.toLowerCase();if(window.innerHeight)window.pageYOffset;else if(document.documentElement&&document.documentElement.scrollTop)document.documentElement.scrollTop;else if(document.body)document.body.scrollTop;if(window.innerWidth)window.pageXOffset;else if(document.documentElement&&document.documentElement.scrollLeft)document.documentElement.scrollLeft;else if(document.body)document.body.scrollLeft;var d=this.findPosX(i),u=this.findPosY(i);d-=10,document.getElementById("newZoom").style.display="none",document.getElementById("newZoomLink").style.display="none",document.getElementById("newCopy").style.display="none",document.getElementById("newCopyLink").style.display="none",document.getElementById("newCopyAll").style.display="none",document.getElementById("newCopyAllLink").style.display="none",document.getElementById("newPaste").style.display="none",document.getElementById("newPasteLink").style.display="none",document.getElementById("newContentLink").style.display="none",document.getElementById("newContent").style.display="none",document.getElementById("newZoomLink").onclick=function(){return siteManager.loadSiteManagerInTab((function(){return siteManager.loadSiteManager(r,a,l,"","",s,1)})),!1},document.getElementById("newZoom").style.display="",document.getElementById("newZoomLink").style.display="","none"!=c&&"00000000000000000000000000000000099"!=l&&"module"!=s.toLowerCase()&&(document.getElementById("newCopyLink").href="javascript:siteManager.copyThis('"+r+"', '"+a+"','false')",document.getElementById("newCopyAllLink").href="javascript:siteManager.copyThis('"+r+"', '"+a+"','true')",document.getElementById("newCopy").style.display="",document.getElementById("newCopyLink").style.display="",document.getElementById("newCopyAll").style.display="",document.getElementById("newCopyAllLink").style.display="");for(var m,f=i.parentNode.parentNode.getElementsByClassName("actions")[0].getElementsByTagName("ul")[0].getElementsByTagName("li"),g=document.getElementById("newContentOptions"),p=g.getElementsByClassName("li-action");m=p[0];)m.parentNode.removeChild(m);for(var h=document.getElementById("newZoom"),v=0;v<f.length;v++)if(f[v].className.indexOf("disabled")<0){var y=document.createElement("li");y.innerHTML=f[v].innerHTML;var b=y.getElementsByTagName("a")[0],C=b.getAttribute("title");y.className="li-action "+C.toLowerCase(),b.removeAttribute("title"),b.innerHTML=b.innerHTML+C,"edit"==C.toLowerCase()?g.insertBefore(y,h.nextSibling):g.appendChild(y)}"author"!=c&&"editor"!=c||"00000000000000000000000000000000099"==l||(document.getElementById("newContentLink").onclick=function(){return siteManager.openNewContentMenu(a,r,n,o,s,l),!1},""!=this.copySiteID&&""!=this.copyContentID&&this.copyModuleID==this.currentModuleID&&(document.getElementById("newPasteLink").href="javascript:siteManager.pasteThis('"+a+"')",document.getElementById("newPaste").style.display="",document.getElementById("newPasteLink").style.display=""),document.getElementById("newContentLink").style.display="",document.getElementById("newContent").style.display="",document.getElementById("newCopy").style.border=""),document.getElementById(t).style.top=u+"px",document.getElementById(t).style.left=d+"px",$("#"+t).removeClass("hide"),""!=this.lastid&&this.lastid!=t&&this.hideMenu(this.lastid),this.lastid=t},findPosX:function(t){var e=0;if(t.offsetParent)for(;t.offsetParent;)e+=t.offsetLeft,t=t.offsetParent;else t.x&&(e+=t.x);return e},findPosY:function(t){var e=0;if(t.offsetParent)for(;t.offsetParent;)e+=t.offsetTop,t=t.offsetParent;else t.y&&(e+=t.y);return e},keepMenu:function(t){$("#"+t).removeClass("hide")},hideMenu:function(t){$("#"+t).addClass("hide")},deleteDisplayObject:function(t){var e=document.getElementById("selectedObjects"+t),i=e.selectedIndex;e.options.length>1&&e.options.length;i<0||(e.options[i]=null,this.updateDisplayObjectList(t),e.options.length&&(e.options[e.options.length-1].selected=!0))},updateDisplayObjectList:function(t){var e=document.getElementById("selectedObjects"+t),i=document.getElementById("objectList"+t);i.value="";for(var a=0;a<e.options.length;a++)""!=i.value?i.value+="^"+e.options[a].value:i.value=e.options[a].value},moveDisplayObjectUp:function(t){var e=document.getElementById("selectedObjects"+t),i=e.selectedIndex;if(!(i<1)){var a=document.createElement("option"),n=document.createElement("option");a.text=e.options[i].text,a.value=e.value,a.selected="selected",n.text=e.options[i-1].text,n.value=e.options[i-1].value,e[i-1]=a,e[i]=n,this.updateDisplayObjectList(t)}},moveDisplayObjectDown:function(t){var e=document.getElementById("selectedObjects"+t),i=e.selectedIndex;if(i!=e.length-1){var a=document.createElement("option"),n=document.createElement("option");a.text=e.options[i].text,a.value=e.options[i].value,a.selected="selected",n.text=e.options[i+1].text,n.value=e.options[i+1].value,e.options[i+1]=a,e.options[i]=n,this.updateDisplayObjectList(t)}},setTargetParams:function(t){var e=!isNaN(t.height.value)&&t.height.value>0?",height="+t.height.value:"",i=!isNaN(t.width.value)&&t.width.value>0?",width="+t.width.value:"",a=!isNaN(t.top.value)&&t.top.value>0?",top="+t.top.value:"",n=!isNaN(t.left.value)&&t.left.value>0?",left="+t.left.value:"",o=""!=t.toolbar.value?",toolbar="+t.toolbar.value:"",r=""!=t.location.value?",location="+t.location.value:"",s=""!=t.directories.value?",directories="+t.directories.value:"",l=""!=t.status.value?",status="+t.status.value:"",c=""!=t.menubar.value?",menubar="+t.menubar.value:"",d=""!=t.resizable.value?",resizable="+t.resizable.value:"",u=""!=t.copyhistory.value?",copyhistory="+t.copyhistory.value:"",m=""!=t.scrollbars.value?",scrollbars="+t.scrollbars.value:"";document.forms.contentForm.targetParams.value=o+r+s+l+c+d+u+m+i+e+a+n},loadSiteParents:function(t,e,i,a,n){$("#mover1").hide();var o="muraAction=cArch.siteParents&compactDisplay=true&siteid="+t+"&contentid="+e+"&parentid="+i+"&keywords="+a+"&isNew="+n+"&cacheid="+Math.random();$("#mover2");$.get("./?"+o,(function(t){$("#mover2").html(t),$("#mover2").show()}))},loadAssocImages:function(t,e,i,a,n){var o="muraAction=cArch.assocImages&compactDisplay=true&siteid="+t+"&fileid="+e+"&contentid="+i+"&keywords="+a+"&isNew="+n+"&cacheid="+Math.random();$("#selectAssocImage");$.get("./?"+o,(function(t){$("#selectAssocImage").html(t),$("#selectAssocImageResults").slideDown()}))},loadObjectClass:function(t,e,i,a,n,o){var r="muraAction=cArch.loadclass&compactDisplay=true&siteid="+t+"&classid="+e+"&subclassid="+i+"&contentid="+a+"&parentid="+n+"&cacheid="+Math.random();if("backEnd"==this.configuratorMode)var s=$("#classList"),l="#classList";else s=$("#configurator"),l="#configurator";return s.html('<div class="load-inline"></div>'),$(l+" .load-inline").spin(spinnerArgs2),$.get("./?"+r,(function(t){$(l+" .load-inline").spin(!1),$(l).html(t),siteManager.availableObjectTemplate="",siteManager.availalbeObjectParams={},siteManager.availableObject={},siteManager.availableObjectValidate=function(){return!0}})),!1},getDisplayObjectClass:function(t){return $("#selectedObjects"+t).val().toString().split("~")[0]},getDisplayObjectID:function(t){return $("#selectedObjects"+t).val().toString().split("~")[2]},loadNotify:function(t,e,i){var a="muraAction=cArch.loadNotify&compactDisplay=true&siteid="+t+"&contentid="+e+"&parentid="+i+"&cacheid="+Math.random(),n=$("#selectNotify");return""==n.html()?(n.show(),n.html('<div class="load-inline"></div>'),$("#selectNotify .load-inline").spin(spinnerArgs2),$.get("./?"+a,(function(t){$("#selectNotify .load-inline").spin(!1),$("#selectNotify").html(t)}))):n.toggle(),!1},loadExpiresNotify:function(t,e,i){var a="muraAction=cArch.loadExpireNotify&compactDisplay=true&siteid="+t+"&contenthistid="+e+"&parentid="+i+"&cacheid="+Math.random(),n=$("#selectExpiresNotify");return""==n.html()?(n.show(),n.html('<div class="load-inline"></div>'),$("#selectExpiresNotify .load-inline").spin(spinnerArgs2),$.get("./?"+a,(function(t){$("#selectExpiresNotify .load-inline").spin(!1),$("#selectExpiresNotify").html(t)}))):n.toggle(),!1},bindDelete:function(){$("a.delete").click((function(){var t=$(this).parent().attr("data-contentid");$(this).parent().remove(),siteManager.setupRCResultIcon($('#selectRelatedContent button[value="'+t+'"]')),siteManager.updateBuckets(),siteManager.updateRCForm(),$("#mura-rc-quickedit").hide()}))},bindMouse:function(){$(".rcSortable li.item:not(.empty), .rcDraggable li.item").mouseup((function(t){1==t.which&&(siteManager.enableBuckets(),$(window).unbind("mousemove"))})).mousedown((function(t){var e=!0;1==t.which&&(siteManager.disableBuckets($(this)),"undefined"!=typeof frontEndProxy&&$(window).bind("mousemove",(function(t){e&&(frontEndProxy.post({cmd:"autoScroll",y:t.pageY}),e=!1)}))),timer=window.setInterval((function(){e=!0}),100)}))},updateBuckets:function(){$(".rcSortable").each((function(t){1==$(this).find("li.item").length?$(this).find("li.empty").removeClass("noShow"):$(this).find("li.empty").addClass("noShow")}))},enableBuckets:function(){$(".rcSortable").each((function(t){$(this).sortable("enable"),$(this).parent().removeClass("disabled")}))},disableBuckets:function(t){$(".rcSortable").each((function(e){$(this).attr("id")!=t.parent().attr("id")&&(("custom"==t.attr("data-content-type").split("/")[0].toLowerCase()&&!$(this).attr("data-accept").length||$(this).attr("data-accept").length&&-1==$(this).attr("data-accept").indexOf(t.attr("data-content-type")))&&($(this).sortable("disable"),$(this).parent().addClass("disabled")),$(this).find('[data-contentid="'+t.attr("data-contentid")+'"]').length>0&&($(this).sortable("disable"),$(this).parent().addClass("disabled")))}))},loadRelatedContent:function(t,e,i,a,n,o,r){void 0===o&&(o=!0);var s=$('input[name="entitytype"]:checked');s.length||(s=$('input[name="entitytype"]')),s=s.length?s.val():"content";var l="muraAction=cArch.loadRelatedContent&compactDisplay=true&contentid="+t+"&siteid="+e+"&external="+o+"&isNew="+i+"&relatedcontentsetid="+r+"&"+a+"&entitytype="+s+"&cacheid="+Math.random();$("#selectRelatedContent").html('<div class="load-inline"></div>'),$("#selectRelatedContent .load-inline").spin(spinnerArgs2),$.get("./?"+l,(function(a){-1!=a.indexOf("mura-primary-login-token")&&(location.href="./"),$("#selectRelatedContent .load-inline").spin(!1),$("#selectRelatedContent").html(a),$(".draggableContainmentInternal").on("scroll",(function(){$("#mura-rc-quickedit").hide()})),$(".rcDraggable li.item").draggable({connectToSortable:".rcSortable",helper:"clone",revert:"invalid",appendTo:"body",start:function(t,e){$("#mura-rc-quickedit").hide(),siteManager.bindMouse()},zIndex:100}).disableSelection(),setDatePickers(".mura-relatedContent-datepicker",dtLocale,dtCh),$("#aAdvancedSearch").click((function(t){t.preventDefault(),$("#rcAdvancedSearch").slideToggle("fast")})),0==i&&1==n&&($("#rcAdvancedSearch").show(),$("#aAdvancedSearch").addClass("active")),siteManager.bindMouse(),setCheckboxTrees(),siteManager.setupRCQuikEdit(),setToolTips(".tab-content"),$("#rcAdvancedSearch").find("ul.categories:not(.checkboxTrees)").css("margin-left","10px"),$(".mura-rc-quickoption").each((function(){siteManager.setupRCResultIcon($(this))})),$("#rcBtnSearch").click((function(i){i.preventDefault();var a=$("#rcAdvancedSearch").is(":visible"),n="#internalContent input";a&&(n="#selectRelatedContent input, #selectRelatedContent select"),$("#mura-rc-quickedit").hide(),siteManager.loadRelatedContent(t,e,0,$(n).serialize(),a,o,r)}))}))},loadRelatedContentSets:function(t,e,i,a,n,o,r,s){r=r||"[]",void 0===s&&(s=!0);var l="muraAction=cArch.loadSelectedRelatedContent&compactDisplay=true&contenthistid="+e+"&type="+i+"&subtype="+a+"&siteid="+n+"&relatedcontentsetid="+(o=o||"")+"&relateditems="+encodeURIComponent(r)+"&external="+s+"&cacheid="+Math.random(),c=$("#selectedRelatedContent");c.html('<div class="load-inline"></div>'),$("#selectedRelatedContent .load-inline").spin(spinnerArgs2),$.get("./?"+l,(function(e){-1!=e.indexOf("mura-primary-login-token")&&(location.href="./"),$("#selectedRelatedContent .load-inline").spin(!1),c.html(e),siteManager.setupRCSortable(t,s,o)}))},setupRCResultIcon:function(t){$("#selectedRelatedContent").find('li[data-contentid="'+t.val()+'"]').length?t.find("i").attr("class","mi-check"):t.find("i").attr("class","mi-plus-circle")},setupRCQuikEdit:function(){$(".mura-rc-quickoption").each((function(){$(this).unbind("on").on("click",(function(){var t=$(this).val(),e=$("#selectRelatedContent").find('li[data-contentid="'+t+'"]');$("#mura-rc-quickedit").show(),$("#mura-rc-quickedit").offset({top:$(this).offset().top}),$(".mura-rc-quickassign").each((function(){var i=this,a=$("#rcSortable-"+$(i).val());($("#mura-rc-quickedit").show(),$(i).attr("disabled",!1),a.attr("id")!=e.parent().attr("id"))&&(("custom"==e.attr("data-content-type").split("/")[0].toLowerCase()&&!a.attr("data-accept").length||a.attr("data-accept").length&&-1==a.attr("data-accept").indexOf(e.attr("data-content-type")))&&$(i).attr("disabled",!0));$(this).unbind("change"),$(this).prop("checked",a.find('li[data-contentid="'+t+'"]').length),$(this).on("change",(function(){$(this).prop("checked")?(e.clone().appendTo($("#rcSortable-"+$(i).val())),$("#rcSortable-"+$(i).val()).find(".mura-rc-quickoption").remove(),$("#rcSortable-"+$(i).val()).find('li[data-contentid="'+t+'"]').append('<a class="delete"></a>')):$("#rcSortable-"+$(i).val()).find('li[data-contentid="'+t+'"]').remove(),siteManager.setupRCResultIcon($('#selectRelatedContent button[value="'+t+'"]')),siteManager.updateBuckets(),siteManager.bindDelete(),siteManager.bindMouse(),siteManager.updateRCForm()}))}))}))}))},setupRCSortable:function(t,e,i){void 0===e&&(e=!0),$(".rcSortable").sortable({connectWith:".rcSortable",revert:!0,appendTo:"body",helper:"clone",update:function(t,e){siteManager.updateBuckets(),0==e.item.find("a.delete").length&&e.item.append('<a class="delete"></a>'),e.item.attr("style",""),siteManager.bindDelete(),siteManager.bindMouse(),siteManager.setDirtyRelatedContent(),siteManager.updateRCForm(),siteManager.setupRCResultIcon($('#selectRelatedContent button[value="'+e.item.attr("data-contentid")+'"]'))},start:function(){siteManager.bindMouse()},stop:function(){siteManager.enableBuckets()},cancel:"li.empty"}).disableSelection(),siteManager.loadRelatedContent(t,siteid,1,"",!1,e,i),siteManager.bindDelete(),siteManager.bindMouse(),siteManager.updateRCForm(),siteManager.setupRCQuikEdit()},updateRCForm:function(){var t=new Array;$(".rcSortable").each((function(){var e=new Array,i=new Object;$(this).find(".mura-rc-quickoption").remove(),$(this).find("li.item:not(.empty)").each((function(){void 0===$(this).attr("data-url")?e.push($(this).attr("data-contentid")):e.push({title:$(this).attr("data-title"),url:$(this).attr("data-url"),contentid:$(this).attr("data-contentid")})})),i.relatedcontentsetid=$(this).attr("data-relatedcontentsetid"),i.items=e,t.push(i)})),$("#relatedContentSetData").val(JSON.stringify(t))},setDirtyRelatedContent:function(){this.dirtyRelatedContent=!0},form_is_modified:function(t){for(var e=0;e<t.elements.length;e++){var i=t.elements[e],a=i.type;if("checkbox"==a||"radio"==a){if(i.checked!=i.defaultChecked)return!0}else if(("hidden"==a||"password"==a||"text"==a||"textarea"==a)&&i.value!=i.defaultValue&&"sdContent"!=i.name)return!0}if("undefined"!=typeof FCKeditorAPI){if(FCKeditorAPI.GetInstance("body")&&FCKeditorAPI.GetInstance("body").IsDirty())return!0;if(FCKeditorAPI.GetInstance("summary")&&FCKeditorAPI.GetInstance("summary").IsDirty())return!0;if(this.dirtyRelatedContent)return!0}else if("undefined"!=typeof CKEDITOR&&void 0!==CKEDITOR.instances.body){if(CKEDITOR.instances.body.checkDirty())return!0}return!1},copyThis:function(t,e,i){var a="muraAction=cArch.saveCopyInfo&siteid="+t+"&contentid="+e+"&moduleid="+siteManager.currentModuleID+"&copyAll="+i+"&cacheid="+Math.random();$.get("./?"+a),this.copyContentID=e,this.copySiteID=t,this.copyModuleID=siteManager.currentModuleID,this.copyAll=i,this.hideMenu("newContentMenu")},pasteThis:function(t){if(this.copyModuleID!=this.currentModuleID)alert("Pasting between modules is not supported.");else{var e="muraAction=cArch.copy&compactDisplay=true&siteid="+this.copySiteID+"&copyAll="+this.copyAll+"&contentid="+this.copyContentID+"&parentid="+t+"&cacheid="+Math.random();$("#newPasteLink").css("background","url(assets/images/ajax-loader.gif) no-repeat 1px 5px;"),this.reloadURL=$("#newZoomLink").attr("href"),actionModal((function(){$.get("./?"+e,(function(e){$("#action-modal").remove(),siteManager.loadSiteManagerInTab((function(){siteManager.loadSiteManager(siteManager.copySiteID,t,siteManager.currentModuleID,"","","",1)}))}))}))}},reloadPage:function(){""==reloadURL?window.location.reload():location.href=this.reloadURL},loadExtendedAttributes:function(t,e,i,a,n,o,r){var s="muraAction=cArch.loadExtendedAttributes&contentHistID="+e+"&type="+i+"&subType="+a+"&siteID="+n+"&tablist="+siteManager.tablist+"&cacheid="+Math.random();return siteID=n,context=o,themeAssetPath=r,$(".extendset-container").each((function(){""!=$(this).html()&&($(this).html('<div class="load-inline"></div>'),$(this).find(".load-inline").spin(spinnerArgs2))})),siteManager.loadRelatedContentSets(t,e,i,a,n),$.ajax({url:"./?"+s,dataType:"text",success:function(t){siteManager.setExtendedAttributes(t)}}),!1},setExtendedAttributes:function(data){var r=eval("("+data+")");$.each(r,(function(t,e){e.length,$("#extendset-container-"+t+" .load-inline").spin(!1),$("#extendset-container-"+t).html(e)})),""==r.default?($("#tabExtendedAttributes").addClass("hide"),$("#tabExtendedAttributesLI").addClass("hide")):($("#tabExtendedAttributes").removeClass("hide"),$("#tabExtendedAttributesLI").removeClass("hide")),r.hassummary?"undefined"!=typeof showSummaryEditor&&showSummaryEditor():"undefined"!=typeof hideSummaryEditor&&hideSummaryEditor(),r.hasbody?"undefined"!=typeof showBodyEditor&&showBodyEditor():"undefined"!=typeof hideBodyEditor&&hideBodyEditor(),r.hasassocfile?($("#assocFileContainer").show(),$("#tabAssoc").show()):($("#assocFileContainer").hide(),$("input[name='newfile']").val(""),$("#tabAssoc").hide()),this.checkExtendSetTargeting(),setHTMLEditors("textarea.mura-html, textarea.htmlEditor"),setMarkdownEditors("textarea.mura-markdown, textarea.markdownEditor"),setDatePickers(".tab-content .datepicker",dtLocale),setColorPickers(".tab-content .mura-colorpicker"),setFinders(".tab-content .mura-ckfinder, .tab-content .mura-finder"),setToolTips(".tab-content"),setFileSelectors();var niceSelects=$(".extendset-container select");niceSelects.niceSelect&&niceSelects.each((function(){var t=$(this);(void 0===t.data("niceselect")||t.data("niceselect"))&&t.niceSelect()})),$(window).trigger("resize")},checkExtendSetTargeting:function(){var t=$(".extendset"),e=!1,i=!1,a=!0;if(t.length){for(var n=0;n<t.length;n++){var o=t[n];if(null!=o.getAttribute("categoryid")&&""!=o.getAttribute("categoryid")){if(!i){var r=$("categoryContainer").getElementsByTagName("select");i=!0}for(var s=0;s<r.length;s++){var l=r[s],c=r[s].getAttribute("categoryid"),d=o.getAttribute("categoryid");!e&&null!=c&&d.indexOf(c)>-1&&(e=!0,membership=l.value)}e&&""!=membership?(this.setFormElementsDisplay(o,""),o.style.display="",a=!1):(this.setFormElementsDisplay(o,"none"),o.style.display="none")}else this.setFormElementsDisplay(o,""),o.style.display="",a=!1;e=!1}a?($("#extendMessage").show(),$("#extendDL").hide()):($("#extendMessage").hide(),$("#extendDL").show())}},resetExtendedAttributes:function(t,e,i,a,n,o){var r=i.split("^");this.loadExtendedAttributes(t,e,r[0],r[1],a,n,o),document.contentForm.type.value=r[0],document.contentForm.subtype.value=r[1]},setFormElementsDisplay:function(t,e){var i=t.getElementsByTagName("input");if(i.length)for(var a=0;a<i.length;a++)i[a].style.display=e;if((i=t.getElementsByTagName("textarea")).length)for(a=0;a<i.length;a++)i[a].style.display=e;if((i=t.getElementsByTagName("select")).length)for(a=0;a<i.length;a++)i[a].style.display=e},loadCategoryFeatureStartStop:function(t,e,i){var a=$("#"+t);if(a.html().length>10)a.toggle();else if(1==e){var n="muraAction=cArch.loadCategoryFeatureStartStop&id="+t.replace(/editDates/,"")+"&siteID="+i+"&cacheid="+Math.random();a.show(),$.get("./?"+n,(function(e){$("#"+t).html(e),setDatePickers("#"+t+" .datepicker",dtLocale),setToolTips("#"+t)}))}},activeQuickEdit:!1,loadSiteManager:function(siteid,topid,moduleid,sortby,sortdirection,ptype,startrow){var url="./",pars="muraAction=cArch.loadSiteManager&siteid="+siteid+"&topid="+topid+"&moduleid="+moduleid+"&sortby="+sortby+"&sortdirection="+sortdirection+"&ptype="+ptype+"&startrow="+startrow+"&cacheid="+Math.random();$("#newContentMenu").addClass("hide"),siteManager.currentModuleID=moduleid;var d=$("#gridContainer");return this.activeQuickEdit||(d.html('<div class="load-inline"></div>').show(),$("#gridContainer .load-inline").spin(spinnerArgs2)),$(".site-manager-mod").removeClass("active"),$('.site-manager-mod[data-moduleid="'+moduleid+'"]').addClass("active"),"00000000000000000000000000000000000"==moduleid?$("#gridContainer").addClass("site-tree"):$("#gridContainer").removeClass("site-tree"),$.ajax({url:url+"?"+pars,dataType:"text",success:function(data){try{var r=eval("("+data+")");siteManager.activeQuickEdit||(d.hide(),$("#gridContainer .load-inline").spin(!1)),d.html(r.html),$("#newContentMenu").addClass("hide"),stripe("stripe"),siteManager.initQuickEdits(),initDraftPrompt(),setToolTips("#gridContainer"),"editor"==r.perm.toLowerCase()&&"orderno"==r.sortby.toLowerCase()&&($("#sortableKids").sortable({helper:"clone",stop:function(t,e){stripe("stripe"),siteManager.setAsSorted(),$(e.item).removeClass("ui-draggable-dragging")},start:function(t,e){$(e.item).addClass("ui-draggable-dragging")}}),$("#sortableKids").disableSelection())}catch(t){console.log(t),-1!=data.indexOf("mura-primary-login-token")&&(location.href="./"),d.html(data)}siteManager.activeQuickEdit||d.hide().animate({opacity:"show"},1e3),siteManager.activeQuickEdit=!1},error:function(t,e,i){console.log("error "+e)}}),!1},sectionLoading:!1,loadSiteFlatByFilter:function(){var t=$("#contentTypeFilter").val();if(""!=t){var e=t.split("^");flatViewArgs.type=e[0],flatViewArgs.subtype=e[1]}else flatViewArgs.type="",flatViewArgs.subtype="";var i=[];$(".categories :checked").each((function(){i.push($(this).val())})),flatViewArgs.categoryid=i.toString();var a=[];if($("input[name='tags']").each((function(){a.push($(this).val())})),flatViewArgs.tags=a.toString(),customtaggroups.length)for(var n=0;n<customtaggroups.length;n++)a=[],$("input[name='"+customtaggroups[n]+"tags']").each((function(){$(this).val().length&&a.push($(this).val())})),flatViewArgs[customtaggroups[n]+"tags"]=a.toString();flatViewArgs.keywords=$("#contentKeywords").val(),flatViewArgs.page=1,flatViewArgs.filtered=!0,this.loadSiteFlat(flatViewArgs)},loadSiteManagerInTab:function(t){return archViewLoaded=!0,window.scrollTo(0,0),$("#gridContainer").html('<div class="load-inline"></div>'),$('#viewTabs a[href="#tabArchitectural"]').tab("show"),t(),!1},loadSiteFlat:function(args){var url="./",pars="muraAction=cArch.loadSiteFlat&cacheid="+Math.random(),d=$("#flatViewContainer");return d.html('<div class="load-inline"></div>'),$("#flatViewContainer .load-inline").spin(spinnerArgs2),$("#newContentMenu").addClass("hide"),$.post(url+"?"+pars,args,(function(data){if(-1!=data.indexOf("mura-primary-login-token")&&(location.href="./"),$("#flatViewContainer .load-inline").spin(!1),d.html(data),stripe("stripe"),setCheckboxTrees(),setToolTips(".mura-table-grid"),$.ajax({url:"?muraAction=carch.loadtagarray&siteid="+siteid,dataType:"text",success:function(data){var tagArray=[];if(data)var tagArray=eval("("+data+")");$("#tags").tagSelector(tagArray,"tags")}}),customtaggroups.length)for(var g=0;g<customtaggroups.length;g++)window[customtaggroups[g]]?$("#"+customtaggroups[g]+"tags").tagSelector(window[customtaggroups[g]],customtaggroups[g]+"tags"):$.ajax({url:"?muraAction=carch.loadtagarray&siteid="+siteid+"&taggroup="+customtaggroups[g],context:{taggroup:customtaggroups[g]},dataType:"text",success:function(data){window[this.taggroup]=eval("("+data+")"),$("#"+this.taggroup+"tags").tagSelector(window[this.taggroup],this.taggroup+"tags")}});$(".navSort a").click((function(t){t.preventDefault(),$(".sortNav .active").toggleClass("active"),$(this).toggleClass("active");var e=$(this).attr("data-sortby");if(e==flatViewArgs.sortby)"asc"==flatViewArgs.sortdirection?flatViewArgs.sortdirection="desc":flatViewArgs.sortdirection="asc";else switch(flatViewArgs.sortby=e,flatViewArgs.sortby){case"menutitle":flatViewArgs.sortdirection="asc";break;case"created":case"lastupdate":case"releasedate":flatViewArgs.sortdirection="desc"}flatViewArgs.page=1,siteManager.loadSiteFlat(flatViewArgs)})),$("#navReports a").click((function(t){t.preventDefault(),$(".navReports .active").toggleClass("active"),$(this).toggleClass("active");var e=$(this).attr("data-report");"mylockedfiles"!=flatViewArgs.report&&"lockedfiles"!=flatViewArgs.report||"mylockedfiles"==e||"lockedfiles"==e||(flatViewArgs.type=""),flatViewArgs.report=e,"mylockedfiles"!=flatViewArgs.report&&"lockedfiles"!=flatViewArgs.report||(flatViewArgs.type="File"),flatViewArgs.page=1,siteManager.loadSiteFlat(flatViewArgs)})),$("#tabFlat .moreResults a").click((function(t){t.preventDefault(),$("#tabFlat .moreResults a").toggleClass("active"),$(this).toggleClass("active"),flatViewArgs.page=$(this).attr("data-page"),siteManager.loadSiteFlat(flatViewArgs)})),initDraftPrompt(),d.hide().animate({opacity:"show"},1e3)})),!1},loadSiteSection:function(node,startrow){var clearTimer=function(){$("#mura-section-loading").spin(!1),$("#mura-section-loading").remove(),$("#mura-grid-loader").remove(),clearTimeout(startTimer)};if(clearTimer(),!this.sectionLoading){this.sectionLoading=!0;var url="./index.cfm",pars="muraAction=cArch.loadSiteSection&siteid="+node.attr("data-siteid")+"&contentID="+node.attr("data-contentid")+"&moduleid="+node.attr("data-moduleid")+"&sortby="+node.attr("data-sortby")+"&sortdirection="+node.attr("data-sortdirection")+"&ptype="+node.attr("data-type")+"&startrow="+startrow+"&cacheid="+Math.random(),icon=node.find("span:first");if(icon.hasClass("hasChildren closed")){var startTimer=setTimeout((function(){node.prepend('<div id="mura-section-loading" class="spinner-wrap"></div>'),$(".mura-grid").prepend('<div id="mura-grid-loader"></div>'),$("#mura-section-loading").spin(spinnerArgs3)}),1e3);icon.removeClass("hasChildren closed"),icon.addClass("hasChildren open"),$.ajax({url:url+"?"+pars,dataType:"text",success:function(data){try{var r=eval("("+data+")");node.find(".mura-section:first").remove(),node.append(r.html),$("#newContentMenu").addClass("hide"),stripe("stripe"),initDraftPrompt(),siteManager.initQuickEdits(),document.all&&document.querySelector&&!document.addEventListener||node.find(".mura-section:first").hide().fadeIn("slow")}catch(t){-1!=data.indexOf("mura-primary-login-token")&&(location.href="./"),node.append(data)}clearTimer(),siteManager.sectionLoading=!1}})}else icon.removeClass("hasChildren open"),icon.addClass("hasChildren closed"),$.get(url+"?"+pars),node.find(".mura-section:first").fadeOut("fast",(function(){node.find(".mura-section:first").remove(),stripe("stripe"),$("#newContentMenu").addClass("hide"),siteManager.sectionLoading=!1}))}return!1},refreshSiteSection:function(node,startrow){if(!this.sectionLoading){this.sectionLoading=!0;var url="./",pars="muraAction=cArch.refreshSiteSection&siteid="+node.attr("data-siteid")+"&contentID="+node.attr("data-contentid")+"&moduleid="+node.attr("data-moduleid")+"&sortby="+node.attr("data-sortby")+"&sortdirection="+node.attr("data-sortdirection")+"&ptype="+node.attr("data-type")+"&startrow="+startrow+"&cacheid="+Math.random();$.ajax({url:url+"?"+pars,dataType:"text",success:function(data){try{var r=eval("("+data+")");node.find(".mura-section:first").remove(),node.append(r.html),$("#newContentMenu").addClass("hide"),stripe("stripe"),initDraftPrompt(),siteManager.initQuickEdits()}catch(t){-1!=data.indexOf("mura-primary-login-token")&&(location.href="./"),node.append(data)}siteManager.activeQuickEdit=!1,siteManager.sectionLoading=!1}})}return!1},setAsSorted:function(){$("#sorted").val("true"),$("#sitemgr-reorder").fadeIn()},initQuickEdits:function(){$(".mura-quickEditItem").click((function(t){if(t.preventDefault(),$(this).data("clicked",!$(this).data("clicked")),$(this).data("clicked")){if(!this.activeQuickEdit){var e=$(this).attr("data-attribute"),i=$(this).parents("li:first"),a="muraAction=cArch.loadQuickEdit&siteid="+siteid+"&contentID="+i.attr("data-contentid")+"&attribute="+e+"&cacheid="+Math.random();$("#mura-quickEditor").remove(),$("#selected").attr("id",""),$("#selectedIcon").attr("id","").attr("src","assets/images/icons/template_24x24.png"),$(this).parent().prepend(quickEditTmpl);var n=$("#mura-quickEditor").parents("dd:first");n.attr("id","selected"),$.get("./?"+a,(function(t){if(-1!=t.indexOf("mura-primary-login-token")&&(location.href="./"),$("#mura-quickEditor").html(t),$("#mura-quickEditor").find("input, select").bind("mousedown.ui-disableSelection selectstart.ui-disableSelection",(function(t){t.stopImmediatePropagation()})),setDatePickers(".mura-quickEdit-datepicker",dtLocale,dtCh),setToolTips(".mura-quickEdit-datepicker"),setDatePickers("#mura-datepicker-displayStart",dtLocale,dtCh),setDatePickers("#mura-datepicker-displayStop",dtLocale,dtCh),setDatePickers("#displayIntervalEndOn",dtLocale,dtCh),$("#hasDraftsMessage").length&&n.addClass("hasDraft"),"template"==e){var i=n.find("img:first");i.length&&i.attr("id","selectedIcon").attr("src","assets/images/icons/template_24x24-on.png")}}))}}else siteManager.closeQuickEdit()}))},saveQuickEdit:function(){this.activeQuickEdit=!0;var t=$("#mura-quickEditor").parent().find(".mura-quickEditItem:first").attr("data-attribute"),e=$("#mura-quickEditor").parents("li:first"),i={muraAction:"cArch.saveQuickEdit",siteID:siteID,contentID:e.attr("data-contentid"),attribute:t};if("isnav"==t)var a={isnav:$("#mura-quickEdit-isnav").val()};else if("inheritObjects"==t)a={inheritObjects:$("#mura-quickEdit-inheritobjects").val()};else if("template"==t)a={template:$("#mura-quickEdit-template").val(),childTemplate:$("#mura-quickEdit-childtemplate").val()};else if("display"==t)if($("#displayInterval").length)a={display:$("#mura-display").val(),displayStop:$("#mura-displayStop").val(),displayStart:$("#mura-displayStart").val(),displayInterval:$("#displayInterval").val()};else a={display:$("#mura-quickEdit-display").val(),displayStop:$("#mura-quickEdit-displayStop").val(),displayStart:$("#mura-quickEdit-displayStart").val()};var n=$.extend({},i,a);$("#mura-quickEditor").html('<img class="loader" src="assets/images/ajax-loader-alt.gif" />'),$.ajax({type:"POST",url:"./index.cfm?"+e.attr("data-csrf"),data:n,success:function(t){-1!=t.indexOf("mura-primary-login-token")&&(location.href="./");var i=e.parents("li:first");if(i.parents("li:first").length)siteManager.refreshSiteSection(i,1);else{var a=$("#top-node").parents("li:first");siteManager.loadSiteManager(a.attr("data-siteid"),a.attr("data-contentid"),a.attr("data-moduleid"),a.attr("data-sortby"),a.attr("data-sortdirection"),a.attr("data-type"),1)}},error:function(t,e,i){alert(t.responseText)},dataType:"text"})},closeQuickEdit:function(){$("#selected").attr("id",""),$("#selectedIcon").attr("id","").attr("src","assets/images/icons/template_24x24.png"),$(".mura-quickEdit").remove()},initCategoryAssignments:function(){$(".mura-quickEditItem").click((function(t){t.preventDefault();var e=$(this).parents("li:first"),i=e.attr("data-cattrim"),a={muraAction:"cArch.loadCategoryAssignment",cattrim:e.attr("data-cattrim"),siteID:e.attr("data-siteid"),categoryID:e.attr("data-categoryid"),categoryAssignment:$("#categoryAssign"+i).val(),featureStart:"",startHour:"",startMinute:"",startDayPart:"",featureStop:"",stopHour:"",stopMinute:"",stopDayPart:""};"2"==a.categoryAssignment&&$.extend(a,{featureStart:$("#featureStart"+i).val(),startHour:$("#startHour"+i).val(),startMinute:$("#startMinute"+i).val(),startDayPart:$("#startDayPart"+i).val(),featureStop:$("#featureStop"+i).val(),stopHour:$("#stopHour"+i).val(),stopMinute:$("#stopMinute"+i).val(),stopDayPart:$("#stopDayPart"+i).val()}),$("#mura-quickEditor").remove(),$("#selected").attr("id",""),$("#selectedIcon").attr("id","").attr("src","assets/images/icons/template_24x24.png"),$(this).parent().prepend(quickEditTmpl);var n=$("#mura-quickEditor").parents("dd:first");$(n).attr("id","selected"),$.ajax({type:"POST",url:"./index.cfm",data:a,success:function(t){-1!=t.indexOf("mura-primary-login-token")&&(location.href="./"),$("#mura-quickEditor").html(t),setDatePickers(".mura-quickEdit-datepicker",dtLocale,dtCh),setToolTips(".mura-quickEdit-datepicker")},error:function(t,e,i){alert(i)},dataType:"text"})}))},saveCategoryAssignment:function(){var t=$("#mura-quickEdit-cattrim").val(),e={muraAction:"cArch.loadCategoryFeatureStartStop",cattrim:t,categoryAssignment:$("#mura-quickEdit-display").val(),featureStart:$("#mura-quickEdit-featureStart").val(),startHour:$("#mura-quickEdit-startHour").val(),startMinute:$("#mura-quickEdit-startMinute").val(),startDayPart:$("#mura-quickEdit-startDayPart").length?$("#mura-quickEdit-startDayPart").val():"",featureStop:$("#mura-quickEdit-featureStop").val(),stopHour:$("#mura-quickEdit-stopHour").val(),stopMinute:$("#mura-quickEdit-stopMinute").val(),stopDayPart:$("#mura-quickEdit-stopDayPart").length?$("#mura-quickEdit-stopDayPart").val():"",siteid:siteid};$("#mura-quickEditor").html('<img class="loader" src="assets/images/ajax-loader-alt.gif" />'),$.ajax({type:"POST",url:"./index.cfm",data:e,success:function(e){-1!=e.indexOf("mura-primary-login-token")&&(location.href="./"),$("#categoryLabelContainer"+t).html(e),siteManager.closeCategoryAssignment(),setToolTips(".mura-quickEdit-datepicker"),siteManager.initCategoryAssignments()},error:function(t,e,i){alert(i)},dataType:"text"})},closeCategoryAssignment:function(){$("#selected").attr("id",""),$(".mura-quickEdit").remove()},availableObjectTemplate:"",availalbeObjectParams:{},availableObject:{},availableObjectValidate:function(){return!0},getDisplayObjectConfig:function(t){var e=$("#selectedObjects"+t).val().toString().split("~"),i={};return i.object=e[0],i.name=e[1],i.objectid=e[2],e.length>3&&(i.params=e[3]),i.regionid=t,i.context=context,i.siteid=siteid,i.contentid=contentid,i.contenthistid=contenthistid,i.parentid=parentid,i},addDisplayObject:function(objectToAdd,regionid,configure,isUpdate){var tmpObject="",tmpValue="",tmpText="";if(isUpdate=isUpdate||!1,"string"==typeof objectToAdd){if(null==document.getElementById(objectToAdd))return alertDialog("Please select a display object."),!1;if("select"==document.getElementById(objectToAdd).tagName.toLowerCase()){if(-1==document.getElementById(objectToAdd).selectedIndex)return alertDialog("Please select a display object."),!1;var addIndex=document.getElementById(objectToAdd).selectedIndex;if(addIndex<0)return!1;var addoption=document.getElementById(objectToAdd).options[addIndex];tmpText=addoption.text,tmpValue=addoption.value}else if("input"==document.getElementById(objectToAdd).tagName.toLowerCase()){var addoption=document.getElementById(objectToAdd);tmpValue=addoption.value}else addoption=document.getElementById(objectToAdd);try{tmpObject=eval("("+addoption.value+")")}catch(t){tmpObject=addoption.value}}else tmpObject=objectToAdd;var checkSelection=!1;if("object"==typeof tmpObject){if(tmpObject.regionid=regionid,tmpObject.context=context,tmpObject.siteid=siteid,tmpObject.contentid=contentid,tmpObject.contenthistid=contenthistid,tmpObject.parentid=parentid,"feed"==tmpObject.object){if(configure&&(tmpObject.regionid=regionid,this.initFeedConfigurator(tmpObject)))return!1;checkSelection=!0}if("feed_slideshow"==tmpObject.object){if(configure)return tmpObject.regionid=regionid,this.initSlideShowConfigurator(tmpObject),!1;checkSelection=!0}if("tag_cloud"==tmpObject.object&&siteManager.customtaggroups.length){if(configure)return tmpObject.regionid=regionid,this.initTagCloudConfigurator(tmpObject),!1;checkSelection=!0}if(siteManager.allowopenfeeds&&"category_summary"==tmpObject.object){if(configure)return tmpObject.regionid=regionid,this.initCategorySummaryConfigurator(tmpObject),!1;checkSelection=!0}if("related_content"==tmpObject.object||"related_section_content"==tmpObject.object){if(configure)return tmpObject.regionid=regionid,this.initRelatedContentConfigurator(tmpObject),!1;checkSelection=!0}if("site_map"==tmpObject.object){if(configure)return tmpObject.regionid=regionid,this.initSiteMapConfigurator(tmpObject),!1;checkSelection=!0}if("plugin"==tmpObject.object){if(configure)if(tmpObject.objectid&&"none"!=tmpObject.objectid.toLowerCase()){var configurator=this.getPluginConfigurator(tmpObject.objectid);if(""!=configurator)return window[configurator](tmpObject),!1;if(siteManager.layoutmanager)return this.initGenericConfigurator(tmpObject),!1}else siteManager.layoutmanager&&this.initGenericConfigurator(tmpObject);checkSelection=!0}if(siteManager.layoutmanager&&(configure&&(siteManager.objectHasConfigurator(tmpObject)?siteManager.configuratorMap[tmpObject.object].initConfigurator(tmpObject):this.initGenericConfigurator(tmpObject)),checkSelection=!0),tmpValue=tmpObject.object,tmpValue=tmpValue+"~"+tmpObject.name,tmpValue=tmpValue+"~"+tmpObject.objectid,"string"==typeof tmpObject.params?tmpValue=tmpValue+"~"+tmpObject.params:"object"==typeof tmpObject.params&&(tmpValue=tmpValue+"~"+JSON.stringify(tmpObject.params)),!isUpdate&&checkSelection&&-1!=document.getElementById("selectedObjects"+regionid).selectedIndex){var currentSelection=this.getDisplayObjectConfig(regionid);currentSelection&&(currentSelection.objectid!=tmpObject.objectid&&currentSelection.objectid!=tmpObject.originid||(isUpdate=!0))}tmpText=tmpObject.name}if(""==tmpValue)return alertDialog("Please select a display object."),!1;var selectedObjects=document.getElementById("selectedObjects"+regionid);if(selectedObjects.options.length)for(var i=0;i<selectedObjects.options.length;i++)if(selectedObjects.options[i].value==tmpValue)return selectedObjects.selectedIndex=i,!1;if(isUpdate&&-1!=selectedObjects.selectedIndex)myoption=selectedObjects.options[selectedObjects.selectedIndex],myoption.text=tmpText,myoption.value=tmpValue;else{var myoption=document.createElement("option");selectedObjects.appendChild(myoption),myoption.text=tmpText,myoption.value=tmpValue,myoption.selected="selected"}return this.updateDisplayObjectList(regionid),!0},initTagCloudConfigurator:function(t){return this.initConfigurator(t,{url:"./",pars:"muraAction=cArch.loadclassconfigurator&compactDisplay=true&siteid="+siteid+"&classid=tag_cloud&contentid="+contentid+"&parentid="+parentid+"&contenthistid="+contenthistid+"&regionid="+t.regionid+"&objectid="+t.objectid+"&cacheid="+Math.random(),title:tagCloudConfiguratorTitle}),!0},initSiteMapConfigurator:function(t){return this.initConfigurator(t,{url:"./",pars:"muraAction=cArch.loadclassconfigurator&compactDisplay=true&siteid="+siteid+"&classid=site_map&contentid="+contentid+"&parentid="+parentid+"&contenthistid="+contenthistid+"&regionid="+t.regionid+"&objectid="+t.objectid+"&cacheid="+Math.random(),title:siteMapConfiguratorTitle}),!0},initCategorySummaryConfigurator:function(t){return(void 0===t.object||"category_summary"==t.object)&&(this.initConfigurator(t,{url:"./",pars:"muraAction=cArch.loadclassconfigurator&compactDisplay=true&siteid="+siteid+"&classid=category_summary&contentid="+contentid+"&parentid="+parentid+"&contenthistid="+contenthistid+"&regionid="+t.regionid+"&objectid="+t.objectid+"&cacheid="+Math.random(),title:categorySummaryConfiguratorTitle}),!0)},initFeedConfigurator:function(t){return this.initConfigurator(t,{url:"./",pars:"muraAction=cArch.loadclassconfigurator&compactDisplay=true&siteid="+siteid+"&classid=feed&contentid="+contentid+"&parentid="+parentid+"&contenthistid="+contenthistid+"&regionid="+t.regionid+"&feedid="+t.objectid+"&cacheid="+Math.random(),title:"Loading...",init:function(t,e){"remote"==t.type.toLowerCase()?"frontEnd"==siteManager.configuratorMode?$("#configuratorHeader").html(remoteFeedConfiguratorTitle):$("#configuratorContainer").dialog("option","title",remoteFeedConfiguratorTitle):"frontEnd"==siteManager.configuratorMode?$("#configuratorHeader").html(localIndexConfiguratorTitle):$("#configuratorContainer").dialog("option","title",localIndexConfiguratorTitle),$("#availableListSort").length&&$("#availableListSort, #displayListSort").sortable({connectWith:".displayListSortOptions",update:function(t){t.stopPropagation(),$("#displayList").val(""),$("#displayListSort > li").each((function(){var t=$("#displayList").val();""!=t?$("#displayList").val(t+","+$.trim($(this).html())):$("#displayList").val($.trim($(this).html()))})),siteManager.layoutmanager?siteManager.updateObjectPreview():siteManager.updateAvailableObject()}}).disableSelection()}}),!0},initFolderConfigurator:function(t){return this.initConfigurator(t,{url:"./",pars:"muraAction=cArch.loadclassconfigurator&compactDisplay=true&siteid="+siteid+"&classid=folder&contentid="+contentid+"&parentid="+parentid+"&contenthistid="+contenthistid+"&regionid="+t.regionid+"&feedid="+t.objectid+"&cacheid="+Math.random(),title:"Loading...",init:function(t,e){folderConfiguratorTitle="Folder","frontEnd"==siteManager.configuratorMode?$("#configuratorHeader").html(folderConfiguratorTitle):$("#configuratorContainer").dialog("option","title",folderConfiguratorTitle),$("#availableListSort").length&&$("#availableListSort, #displayListSort").sortable({connectWith:".displayListSortOptions",update:function(t){t.stopPropagation(),$("#displayList").val(""),$("#displayListSort > li").each((function(){var t=$("#displayList").val();""!=t?$("#displayList").val(t+","+$.trim($(this).html())):$("#displayList").val($.trim($(this).html()))})),siteManager.layoutmanager?siteManager.updateObjectPreview():siteManager.updateAvailableObject()}}).disableSelection()}}),!0},initSlideShowConfigurator:function(t){return this.initConfigurator(t,{url:"./",pars:"muraAction=cArch.loadclassconfigurator&compactDisplay=true&siteid="+siteid+"&classid=feed_slideshow&contentid="+contentid+"&parentid="+parentid+"&contenthistid="+contenthistid+"&regionid="+t.regionid+"&feedid="+t.objectid+"&cacheid="+Math.random(),title:slideShowConfiguratorTitle,init:function(t,e){$("#availableListSort, #displayListSort").sortable({connectWith:".displayListSortOptions",update:function(t){t.stopPropagation(),$("#displayList").val(""),$("#displayListSort > li").each((function(){var t=$("#displayList").val();""!=t?$("#displayList").val(t+","+$(this).html()):$("#displayList").val($(this).html())})),siteManager.layoutmanager?siteManager.updateObjectPreview():siteManager.updateAvailableObject()}}).disableSelection()}}),!0},initRelatedContentConfigurator:function(t){return this.initConfigurator(t,{url:"./",pars:"muraAction=cArch.loadclassconfigurator&compactDisplay=true&siteid="+siteid+"&classid="+t.object+"&contentid="+contentid+"&parentid="+parentid+"&contenthistid="+contenthistid+"&regionid="+t.regionid+"&objectid="+t.objectid+"&cacheid="+Math.random(),title:relatedContentConfiguratorTitle,init:function(t,e){$("#availableListSort, #displayListSort").sortable({connectWith:".displayListSortOptions",update:function(t){t.stopPropagation(),$("#displayList").val(""),$("#displayListSort > li").each((function(){var t=$("#displayList").val();""!=t?$("#displayList").val(t+","+$(this).html()):$("#displayList").val($(this).html())})),siteManager.layoutmanager?siteManager.updateObjectPreview():siteManager.updateAvailableObject()}}).disableSelection()}}),!0},initGenericConfigurator:function(t){return this.resetAvailableObject(),"backEnd"==this.configuratorMode&&this.resetConfiguratorContainer(),siteManager.layoutmanager?this.initConfigurator(t,{url:"./",pars:"muraAction=cArch.loadclassconfigurator&compactDisplay=true&siteid="+siteid+"&classid="+t.object+"&contentid="+contentid+"&parentid="+parentid+"&contenthistid="+contenthistid+"&regionid="+t.regionid+"&objectid="+t.objectid+"&cacheid="+Math.random(),title:t.title||t.name,iconclass:t.iconclass,init:function(t,e){}}):$("#configuratorContainer").dialog({resizable:!0,modal:!0,width:400,title:t.title||t.name,position:getDialogPosition(),buttons:{Cancel:function(){$(this).dialog("close")}},open:function(){$("#configurator").html('<div class="ui-dialog-content ui-widget-content">'+genericConfiguratorMessage+"</div>")},close:function(){$(this).dialog("destroy")}}),!0},updateAvailableObject:function(){var t={};$(".objectParam, .objectparam").each((function(){var e=$(this);null!=e.val()&&("radio"!=e.attr("type")||"radio"==e.attr("type")&&e.is(":checked"))&&(e.attr("id")&&void 0!==CKEDITOR.instances[e.attr("id")]&&CKEDITOR.instances[e.attr("id")].updateElement(),void 0!==e.attr("name")&&(void 0===t[e.attr("name")]?"checkbox"!=e.attr("type")||e.is(":checked")?t[e.attr("name")]=e.val():t[e.attr("name")]="":("checkbox"!=e.attr("type")||e.is(":checked"))&&(t[e.attr("name")]=t[e.attr("name")]+","+e.val())))}));var e={};$(".objectStyle, .objectstyle").each((function(){var t=$(this);null!=t.val()&&("radio"!=t.attr("type")||"radio"==t.attr("type")&&t.is(":checked"))&&(void 0!==t.attr("name")&&(void 0===e[t.attr("name")]?"checkbox"!=t.attr("type")||t.is(":checked")?e[t.attr("name")]=t.val():e[t.attr("name")]="":("checkbox"!=t.attr("type")||t.is(":checked"))&&(e[t.attr("name")]=e[t.attr("name")]+","+t.val())),void 0!==e[t.attr("name")]&&""==e[t.attr("name")]&&delete e[t.attr("name")])}));var i={};$(".metaStyle, .metastyle").each((function(){var t=$(this);null!=t.val()&&("radio"!=t.attr("type")||"radio"==t.attr("type")&&t.is(":checked"))&&(void 0!==t.attr("name")&&(void 0===i[t.attr("name")]?"checkbox"!=t.attr("type")||t.is(":checked")?i[t.attr("name")]=t.val():i[t.attr("name")]="":("checkbox"!=t.attr("type")||t.is(":checked"))&&(i[t.attr("name")]=i[t.attr("name")]+","+t.val())),void 0!==i[t.attr("name")]&&""==i[t.attr("name")]&&delete i[t.attr("name")])}));var a={};$(".contentStyle, .contentstyle").each((function(){var t=$(this);null!=t.val()&&("radio"!=t.attr("type")||"radio"==t.attr("type")&&t.is(":checked"))&&(void 0!==t.attr("name")&&(void 0===a[t.attr("name")]?"checkbox"!=t.attr("type")||t.is(":checked")?a[t.attr("name")]=t.val():a[t.attr("name")]="":("checkbox"!=t.attr("type")||t.is(":checked"))&&(a[t.attr("name")]=a[t.attr("name")]+","+t.val())),void 0!==a[t.attr("name")]&&""==a[t.attr("name")]&&delete a[t.attr("name")])}));var n={};$(".styleSupport, .stylesupport").each((function(){var t=$(this);null!=t.val()&&("radio"!=t.attr("type")||"radio"==t.attr("type")&&t.is(":checked"))&&(void 0!==t.attr("name")&&(void 0===n[t.attr("name")]?"checkbox"!=t.attr("type")||t.is(":checked")?n[t.attr("name")]=t.val():n[t.attr("name")]="":("checkbox"!=t.attr("type")||t.is(":checked"))&&(n.stylesupport[t.attr("name")]=n[t.attr("name")]+","+t.val())),void 0!==n[t.attr("name")]&&""==n[t.attr("name")]&&delete n[t.attr("name")])})),this.availableObject=$.extend({},this.availableObjectTemplate),this.availableObject.params=t,n.objectstyles=e,n.metastyles=i,n.contentstyles=a,void 0===n.objectminheightuomval&&(delete n.objectminheightuom,delete n.objectminheightnum),void 0===n.contentwidthuomval&&(delete n.contentwidthuom,delete n.contentwidthnum),void 0===n.contentminheightuomval&&(delete n.contentminheightuom,delete n.contentminheightnum),n.objectstyles.marginTop||n.objectstyles.marginLeft||n.objectstyles.marginBottom||n.objectstyles.marginRight||delete n.objectmarginuom,n.objectstyles.paddingTop||n.objectstyles.paddingLeft||n.objectstyles.paddingBottom||n.objectstyles.paddingRight||delete n.objectpaddinguom,n.metastyles.marginTop||n.metastyles.marginLeft||n.metastyles.marginBottom||n.metastyles.marginRight||delete n.metamarginuom,n.metastyles.paddingTop||n.metastyles.paddingLeft||n.metastyles.paddingBottom||n.metastyles.paddingRight||delete n.metapaddinguom,n.contentstyles.marginTop||n.contentstyles.marginLeft||n.contentstyles.marginBottom||n.contentstyles.marginRight||delete n.contentmarginuom,n.contentstyles.paddingTop||n.contentstyles.paddingLeft||n.contentstyles.paddingBottom||n.contentstyles.paddingRight||delete n.contentpaddinguom;var o=["backgroundImage","backgroundAttachment","backgroundRepeat","backgroundSize"];if(!n.objectbackgroundimageurl){for(var r=["objectbackgroundimageurl","objectBackgroundPositionY","objectbackgroundpositiony","objectBackgroundPositionX","objectbackgroundpositionx","objectbackgroundimageurl"],s=0;s<r.length;s++)void 0!==n[r[s]]&&delete n[r[s]];for(s=0;s<o.length;s++)void 0!==n.objectstyles[o[s]]&&delete n.objectstyles[o[s]]}if(!n.metabackgroundimageurl){for(r=["metabackgroundimageurl","metaBackgroundPositionY","metabackgroundpositiony","metaBackgroundPositionX","metabackgroundpositionx","metabackgroundimageurl"],s=0;s<r.length;s++)void 0!==n[r[s]]&&delete n[r[s]];for(s=0;s<o.length;s++)void 0!==n.metastyles[o[s]]&&delete n.metastyles[o[s]]}if(!n.contentbackgroundimageurl){for(r=["contentbackgroundimageurl","contentBackgroundPositionY","contentbackgroundpositiony","contentBackgroundPositionX","contentbackgroundpositionx","contentbackgroundimageurl"],s=0;s<r.length;s++)void 0!==n[r[s]]&&delete n[r[s]];for(s=0;s<o.length;s++)void 0!==n.contentstyles[o[s]]&&delete n.contentstyles[o[s]]}this.availableObject.params.stylesupport=JSON.stringify(n),"object"==typeof originParams&&(this.availableObject.params=$.extend(originParams,this.availableObject.params)),this.availableObject.params.label||(this.availableObject.params.labeltag="")},configuratorMap:{container:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},collection:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},text:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},embed:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},feed:{condition:function(){return!0},initConfigurator:function(t){siteManager.initFeedConfigurator(t)}},form:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},component:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},folder:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},gallery:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},calendar:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},form_responses:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},plugin:{condition:function(){return!0},initConfigurator:function(t){if(t.objectid&&"none"!=t.objectid.toLowerCase()&&siteManager.getPluginConfigurator(t.objectid)){var e=siteManager.getPluginConfigurator(t.objectid);window[e](t)}else siteManager.initGenericConfigurator(t)}},feed_slideshow:{condition:function(){return!0},initConfigurator:function(t){siteManager.initSlideShowConfigurator(t)}},tag_cloud:{condition:function(){return siteManager.customtaggroups.length},initConfigurator:function(t){siteManager.initTagCloudConfigurator(t)}},category_summary:{condition:function(){return!0},initConfigurator:function(t){siteManager.allowopenfeeds?siteManager.initCategorySummaryConfigurator(t):siteManager.initGenericConfigurator(t)}},archive_nav:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},calendar_nav:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},category_summary_rss:{condition:function(){return siteManager.allowopenfeeds},initConfigurator:function(t){siteManager.initCategorySummaryConfigurator(t)}},site_map:{condition:function(){return!0},initConfigurator:function(t){siteManager.initSiteMapConfigurator(t)}},related_content:{condition:function(){return!0},initConfigurator:function(t){siteManager.initRelatedContentConfigurator(t)}},related_section_content:{condition:function(){return!0},initConfigurator:function(t){siteManager.initRelatedContentConfigurator(t)}},system:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},comments:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},favorites:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},forward_email:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},event_reminder_form:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},rater:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},user_tools:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},goToFirstChild:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},navigation:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},sub_nav:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},peer_nav:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},standard_nav:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},portal_nav:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},folder_nav:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},multilevel_nav:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},seq_nav:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},top_nav:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},mailing_list:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}},mailing_list_master:{condition:function(){return!0},initConfigurator:function(t){siteManager.initGenericConfigurator(t)}}},customtaggroups:[],allowopenfeeds:!1,objectHasConfigurator:function(t){return t.object in this.configuratorMap&&this.configuratorMap[t.object].condition()},initDisplayObjectConfigurators:function(){var t=this;$(".displayRegions").dblclick((function(){var e=$(this).attr("data-regionid"),i=t.getDisplayObjectConfig(e);t.objectHasConfigurator(i)?t.configuratorMap[i.object].initConfigurator(i):t.initGenericConfigurator(i)}))},resetAvailableObject:function(){this.availableObjectTemplate="",this.availableObject={},this.availableObjectValidate=function(){return!0}},resetConfiguratorContainer:function(){$("#configuratorContainer").remove(),$("body").append('<div id="configuratorContainer" title="Loading..." style="display:none"></div>');$("#configuratorContainer").html('<div id="configurator"><div class="load-inline"></div></div>'),$("#configuratorContainer .load-inline").spin(spinnerArgs2)},initConfiguratorParams:function(){this.updateAvailableObject(),$(".objectParam, .objectparam, .objectStyle, .objectstyle, .metaStyle, .metastyle, .contentStyle, .contentstyle").bind("change",(function(){siteManager.updateAvailableObject()}))},setContentDisplayListSort:function(){$("#contentAvailableListSort, #contentDisplayListSort").sortable({connectWith:".contentDisplayListSortOptions",update:function(t){t.stopPropagation(),$("#contentDisplayList").val(""),$("#contentDisplayListSort > li").each((function(){var t=$("#contentDisplayList").val();""!=t?$("#contentDisplayList").val(t+","+$.trim($(this).html())):$("#contentDisplayList").val($.trim($(this).html()))}))}}).disableSelection()},configuratorMode:"backEnd",previewURL:"",loadObjectPreview:function(t){var e="core/utilities/objectpreview/";if(e+="?siteid=",e+=t.siteid,e+="&contenthistid=",e+=t.contenthistid,e+="&parentid=",e+=t.parentid,e+="&object=",e+=t.object,e+="&compactDisplay=true",e+="&objectid=",e+=t.objectid,e+="&params=",(e+=escape(t.params))!=siteManager.previewURL){var i=$("#configuratorPreview");i.length&&(siteManager.previewURL=e,i.attr("src",siteManager.previewURL))}},updateObjectPreview:function(){siteManager.updateAvailableObject(),configOptions.params=JSON.stringify(siteManager.availableObject.params),siteManager.loadObjectPreview(configOptions)},initConfigurator:function(data,config){if(this.resetAvailableObject(),this.previewURL="",void 0!==config.validate&&(this.availableObjectValidate=config.validate),data.configuratorMode=this.configuratorMode,void 0===data.object)return!1;if(siteManager.layoutmanager&&(data.layoutmanager=!0),"backEnd"==this.configuratorMode){siteManager.layoutmanager&&(configOptions=$.extend({},data),configOptions.params=configOptions.params||{}),this.resetConfiguratorContainer();var originid=data.objectid;$("#configuratorContainer").dialog({resizable:!0,modal:!0,width:600,position:getDialogPosition(),buttons:{Save:function(){siteManager.updateAvailableObject();var availableObjectSelector=$("#availableObjectSelector");if(availableObjectSelector.length){var selectedObject=eval("("+availableObjectSelector.val()+")");siteManager.availableObject.name=selectedObject.name,siteManager.availableObject.object=selectedObject.object,siteManager.availableObject.objectid=selectedObject.objectid,siteManager.availableObject.originid=originid,delete selectedObject.name,delete selectedObject.object,delete selectedObject.objectid,$.extend(siteManager.availableObject.params,selectedObject)}if(siteManager.availableObjectValidate(siteManager.availableObject.params)){for(var p in void 0!==config.destroy&&config.destroy(data,config),$(this).dialog("destroy"),siteManager.availableObject)"function"==typeof siteManager.availableObject[p]&&delete siteManager.availableObject[p];configure="none"!=siteManager.availableObject.objectid&&originid!=siteManager.availableObject.objectid&&siteManager.getPluginConfigurator(siteManager.availableObject.objectid),siteManager.addDisplayObject(siteManager.availableObject,data.regionid,configure,!0)}},Cancel:function(){void 0!==config.destroy&&config.destroy(data,config),$(this).dialog("destroy")}},close:function(){void 0!==config.destroy&&config.destroy(data,config),$(this).dialog("destroy")}});var url=config.url+"?"+config.pars+"&contenttype="+document.contentForm.type.value+"&contentsubtype="+document.contentForm.subtype.value}else var url=config.url+"?"+config.pars;return $.ajax({url:url,dataType:"text",data:data,type:"post",success:function(_resp){window.configuratorInited;try{resp=eval("("+_resp+")")}catch(t){-1!=_resp.indexOf("mura-primary-login-token")&&(location.href="./"),resp=_resp}if("object"==typeof resp?$("#configurator").html(resp.html):"xml"==typeof resp?$("#configurator").html(resp.toString()):$("#configurator").html(resp),$(".form-actions").show(),niceSelects=$(".mura #configurator select"),niceSelects.niceSelect&&niceSelects.each((function(){var t=$(this);(void 0===t.data("niceselect")||t.data("niceselect"))&&t.niceSelect()})),"frontEnd"==siteManager.configuratorMode?(wireupExterndalUIWidgets(),$(".mura-html:not(textarea").each((function(){var t=$(this);t.click((function(){siteManager.openDisplayObjectModal("object/html.cfm",t.data())}))})),$(".mura-associmage").each((function(){var t=$(this);t.click((function(){siteManager.openDisplayObjectModal("object/associmage.cfm",t.data())}))})),config.title.indexOf("<i class=")>-1?$("#configuratorHeader").html(config.title):(config.iconclass=config.iconclass||"mi-cog",$("#configuratorHeader").html('<i class="'+config.iconclass+'"></i> '+config.title))):$("#configuratorContainer").dialog("option","title",config.title),""==siteManager.availableObjectTemplate){var availableObjectContainer=$("#availableObjectParams");siteManager.availableObjectTemplate={object:availableObjectContainer.attr("data-object"),objectid:availableObjectContainer.attr("data-objectid"),name:availableObjectContainer.attr("data-name")},siteManager.availableObjectTemplate.object=siteManager.availableObjectTemplate.object||data.object,siteManager.availableObjectTemplate.objectid=siteManager.availableObjectTemplate.objectid||data.objectid,siteManager.availableObjectTemplate.name=siteManager.availableObjectTemplate.name||data.name,siteManager.availableObject=$.extend({},siteManager.availableObjectTemplate)}void 0!==config.init&&("object"==typeof resp&&(data=$.extend(data,resp)),config.init(data,config)),siteManager.layoutmanager?(setTabs(),siteManager.updateAvailableObject(),$("#configurator").change(siteManager.updateAvailableObject)):siteManager.updateAvailableObject(),"backEnd"==siteManager.configuratorMode?$("#configuratorContainer").dialog("option","position",getDialogPosition()):"frontEnd"==siteManager.configuratorMode&&($("#actionButtons").show(),$("#configuratorNotices").show()),window.configuratorInited=!1}}),!0},getPluginConfigurator:function(t){for(var e=0;e<pluginConfigurators.length;e++)if(pluginConfigurators[e].objectid==t)return pluginConfigurators[e].init;return""},openContentDiff:function(t,e,i){return $("#contentDiffContainer").remove(),$("body").append('<div id="contentDiffContainer" title="Loading..." style="display:none"><div class="ui-dialog-content ui-widget-content"><div class="load-inline"></div></div></div>'),$("#contentDiffContainer .load-inline").spin(spinnerArgs2),$("#contentDiffContainer").dialog({resizable:!1,modal:!0,width:990,title:"Version History Comparison: Code & Attribute Diff",position:getDialogPosition(),open:function(){$("#contentDiffContainer").html('<div class="ui-dialog-content ui-widget-content"><div class="load-inline"></div></div>');var a="muraAction=cArch.loaddiff&compactDisplay=true&siteid="+i+"&contenthistid1="+t+"&contenthistid2="+e+"&cacheid="+Math.random();$.ajax("./index.cfm?"+a).done((function(t){-1!=t.indexOf("mura-primary-login-token")&&(location.href="./"),$("#contentDiffContainer .load-inline").spin(!1),$("#contentDiffContainer").html(t),$("#contentDiffContainer").dialog("option","position","center"),$(".ui-widget-overlay").css("height",$(document).height())})).fail((function(t){-1!=t.responseText.indexOf("mura-primary-login-token")&&(location.href="./"),$("#contentDiffContainer .load-inline").spin(!1),$("#contentDiffContainer").html(t.responseText),$("#contentDiffContainer").dialog("option","position","center")}))},close:function(){$(this).dialog("destroy"),$("#contentDiffContainer").remove()}}),!1},openDisplayObjectModal:function(t,e){e=e||{};var i=Mura.getQueryStringParams(location.search);Mura.deepExtend(Mura.setLowerCaseKeys(i),Mura.setLowerCaseKeys(e)),i.sourceframe="modal",i.muraaction="carch.displayobjectmodal",i.view=t;var a="?";for(var n in i)a=a+"&"+n+"="+encodeURIComponent(i[n]);frontEndProxy.post({cmd:"openModal",src:a})},setDisplayObjectModalWidth:function(t){t=t||"standard",$((function(){$("#ProxyIFrame").length?$("#ProxyIFrame").load((function(){frontEndProxy.post({cmd:"setWidth",width:t})})):frontEndProxy.post({cmd:"setWidth",width:t})}))},updateDisplayObjectParams:function(t,e){t=t||{},e=void 0===e||e;var i=Mura.setLowerCaseKeys(Mura.getQueryStringParams(location.search));t=Mura.extend({},siteManager.availableObject.params,t),$((function(){$("#ProxyIFrame").length?$("#ProxyIFrame").load((function(){frontEndProxy.post({cmd:"setObjectParams",reinit:"sidebar"!=i.sourceframe,instanceid:i.instanceid,params:t,complete:e})})):frontEndProxy.post({cmd:"setObjectParams",reinit:"sidebar"!=i.sourceframe,instanceid:i.instanceid,params:t,complete:e})}))},requestDisplayObjectParams:function(t,e){e=e||"modal";var i=t;siteManager.frontEndProxyListeners.push({cmd:"customObjectParamsRequest",fn:function(t){$(".objectParam, .objectparam").each((function(){var e=$(this);if("string"==typeof e.attr("name")){var i=e.attr("name").toLowerCase();void 0!==t[i]&&(e.is(":radio")?e.val().toString()==t[i].toString()&&e.attr("checked",!0):(e.val(t[i].toString()),e.is("SELECT")&&e.niceSelect("update"),e.attr("id")&&void 0!==CKEDITOR.instances[e.attr("id")]&&CKEDITOR.instances[e.attr("id")].updateElement()))}})),siteManager.initConfiguratorParams(),i(t)}});var a=Mura.getQueryStringParams(location.search);$((function(){$("#ProxyIFrame").length?$("#ProxyIFrame").load((function(){frontEndProxy.post({cmd:"requestObjectParams",instanceid:a.instanceid,targetFrame:e,callback:"customObjectParamsRequest"})})):frontEndProxy.post({cmd:"requestObjectParams",instanceid:a.instanceid,targetFrame:e,callback:"customObjectParamsRequest"})}))},frontEndProxyListener:function(t){for(var e=t.data,i=siteManager.frontEndProxyListeners,a=0;a<i.length;a++)i[a].cmd==e.cmd&&(e.params?i[a].fn(e.params):i[a].fn(e),i[a].cmd="void")},frontEndProxyListeners:[]},quickEditTmpl='<div class="mura-quickEdit" id="mura-quickEditor">',quickEditTmpl+='<img class="loader" src="assets/images/ajax-loader-alt.gif" />',quickEditTmpl+="</div>",$(document).ready((function(){siteManager.initDisplayObjectConfigurators()}))},function(t,e){categoryManager={DHTML:document.getElementById||document.all||document.layers,lastid:"",getObj:function(t){document.getElementById?(this.obj=document.getElementById(t),this.style=document.getElementById(t).style):document.all?(this.obj=document.all[t],this.style=document.all[t].style):document.layers&&(this.obj=document.layers[t],this.style=document.layers[t])},showMenu:function(t,e,i,a){if(window.innerHeight)window.pageYOffset;else if(document.documentElement&&document.documentElement.scrollTop)document.documentElement.scrollTop;else if(document.body)document.body.scrollTop;if(window.innerWidth)window.pageXOffset;else if(document.documentElement&&document.documentElement.scrollLeft)document.documentElement.scrollLeft;else if(document.body)document.body.scrollLeft;var n=this.findPosX(e),o=this.findPosY(e);n-=10,document.getElementById(t).style.top=o+"px",document.getElementById(t).style.left=n+"px",$("#"+t).removeClass("hide"),document.getElementById("newCategoryLink").href="./?muraAction=cCategory.edit&parentid="+i+"&siteid="+a;for(var r,s=e.parentNode.parentNode.getElementsByClassName("actions")[0].getElementsByTagName("ul")[0].getElementsByTagName("li"),l=document.getElementById("newCategoryOptions"),c=l.getElementsByClassName("li-action");r=c[0];)r.parentNode.removeChild(r);for(var d=document.getElementById("newPage"),u=0;u<s.length;u++)if(s[u].className.indexOf("disabled")<0){var m=document.createElement("li");m.innerHTML=s[u].innerHTML;var f=m.getElementsByTagName("a")[0],g=f.getAttribute("title");m.className="li-action "+g.toLowerCase(),f.removeAttribute("title"),f.innerHTML=f.innerHTML+g,"edit"==g.toLowerCase()?l.insertBefore(m,d.nextSibling):l.appendChild(m)}""!=this.lastid&&this.lastid!=t&&this.hideMenu(this.lastid),this.lastid=t},findPosX:function(t){var e=0;if(t.offsetParent)for(;t.offsetParent;)e+=t.offsetLeft,t=t.offsetParent;else t.x&&(e+=t.x);return e},findPosY:function(t){var e=0;if(t.offsetParent)for(;t.offsetParent;)e+=t.offsetTop,t=t.offsetParent;else t.y&&(e+=t.y);return e},keepMenu:function(t){$("#"+t).removeClass("hide")},hideMenu:function(t){$("#"+t).addClass("hide")}}},function(t,e){commentManager={reload:!1,loadSearch:function(t){var e="muraAction=cComments.loadComments&siteid="+siteid+"&"+t+"&cacheid="+Math.random();commentManager.reload=!1,$("#commentSearch").html('<div class="load-inline"></div>'),$("#commentSearch .load-inline").spin(spinnerArgs2),$.get("./?"+e,(function(t){$("#commentSearch").html(t),setDatePickers(".mura-custom-datepicker",dtLocale,dtCh),setCheckboxTrees(),$("#advancedSearch").find("ul.categories:not(.checkboxTrees)").css("margin-left","10px"),commentManager.bindEvents()}))},bulkEdit:function(){var t=$("#frmUpdate").serialize(),e="muraAction=cComments.bulkEdit&siteid="+siteid+"&"+t+"&cacheid="+Math.random();$.get("./?"+e,(function(){commentManager.submitSearch()}))},singleEdit:function(t,e){var i="muraAction=cComments.singleEdit&siteid="+siteid+"&commentid="+t+"&updateaction="+e+"&cacheid="+Math.random();commentManager.reload=!0,$.get("./?"+i,(function(){$(".modal").modal("hide")}))},submitSearch:function(){commentManager.loadSearch($("#commentSearch input, #commentSearch select").serialize())},setSort:function(t){$("#sortBy").val(t.attr("data-sortby")),$("#sortDirection").val(t.attr("data-sortdirection")),commentManager.submitSearch()},setNextN:function(t){$("#nextN").val(t.attr("data-nextn")),commentManager.submitSearch()},setPageNo:function(t){$("#pageNo").val(t.attr("data-pageno")),commentManager.submitSearch()},bindEvents:function(){$("#btnSearch").click((function(t){t.preventDefault(),commentManager.submitSearch()})),$("#frmSearch").submit((function(t){t.preventDefault(),commentManager.submitSearch()})),$("a.sort").click((function(t){t.preventDefault(),commentManager.setSort($(this))})),$("a.nextN").click((function(t){t.preventDefault(),commentManager.setNextN($(this))})),$("a.pageNo").click((function(t){t.preventDefault(),commentManager.setPageNo($(this))})),$("#checkall").click((function(t){t.preventDefault();var e=$(":checkbox.checkall");e.prop("checked",!e.prop("checked"))})),$("a.bulkEdit").click((function(t){t.preventDefault();var e=$(this);confirmDialog(e.attr("data-alertmessage"),(function(){$("#bulkedit").val(e.attr("data-action")),commentManager.bulkEdit()}))})),$("a#purge-comments").click((function(t){t.preventDefault();var e=$(this);console.log("request to purge"),confirmDialog(e.attr("data-alertmessage"),(function(){console.log("purge approved"),actionModal((function(){commentManager.purgeDeletedComments()}))}))})),$("a.singleEdit").click((function(t){t.preventDefault();var e=$(this);commentManager.singleEdit(e.attr("data-commentid"),e.attr("data-action"))})),$(".modal").on("show.bs.modal",(function(){var t=$(this),e={contentID:t.attr("data-contentid"),commentID:t.attr("data-commentid")};t.find("div.modal-body").html('<div class="load-inline"></div>'),t.find("div.modal-body .load-inline").spin(spinnerArgs2),commentManager.loadPage(e).success((function(e){t.find("div.modal-body").html(e);var i=$("#detail-"+t.attr("data-commentid"));i.fadeIn(),t.find("div.modal-body").animate({scrollTop:i.position().top},"slow"),commentManager.bindAjaxEvents(t)}))})),$(".modal").on("hidden.bs.modal",(function(){if(commentManager.reload)commentManager.submitSearch();else{var t=$(this);t.find("#commentsPage").remove(),t.find("div.modal-body").html('<div class="load-inline"></div>'),t.find("div.modal-body .load-inline").spin(spinnerArgs2)}}))},bindAjaxEvents:function(t){t.find("#moreCommentsUp").unbind("click").on("click",(function(e){e.preventDefault();var i={contentID:t.attr("data-contentid"),upperID:$(this).attr("data-upperid")};commentManager.loadPage(i).success((function(e){t.find("#moreCommentsUpContainer").remove(),$(e).prependTo(t.find("#commentsPage")).hide().fadeIn(),commentManager.bindAjaxEvents(t)}))})),t.find("#moreCommentsDown").unbind("click").on("click",(function(e){e.preventDefault();var i={contentID:t.attr("data-contentid"),lowerID:$(this).attr("data-lowerid")};commentManager.loadPage(i).success((function(e){t.find("#moreCommentsDownContainer").remove(),$(e).appendTo(t.find("#commentsPage")).hide().fadeIn(),commentManager.bindAjaxEvents(t)}))})),t.find(".inReplyTo").on("click",(function(e){e.preventDefault();var i=$(this).attr("data-parentid");if($("#detail-"+i).length)commentManager.scrollToID($("#detail-"+i));else{var a={contentID:t.attr("data-contentid"),upperID:$(this).attr("data-parentid")};commentManager.loadPage(a).success((function(e){t.find("#moreCommentsUpContainer").remove(),$(e).prependTo(t.find("#commentsPage")).hide().fadeIn(),commentManager.bindAjaxEvents(t),commentManager.scrollToID($("#detail-"+i))}))}}))},scrollToID:function(t){$("html, body").animate({scrollTop:t.offset().top-50},500,(function(){t.fadeTo("fast",.5,(function(){t.fadeTo("fast",1)}))}))},loadPage:function(t){var e={muraAction:"ccomments.loadcommentspage",sortDirection:"asc",siteid:siteid};return $.extend(e,t),$.ajax({url:"./",data:e,cache:!1})},purgeDeletedComments:function(){var t="muraAction=cComments.purgeDeletedComments&siteid="+siteid+"&cacheid="+Math.random();$.get("./?"+t,(function(){$("#action-modal").remove(),commentManager.submitSearch()}))}}},function(t,e){var i,a;loadObject=function(t,e,i){var a,n=e;processReqChange=function(){4==a.readyState&&200==a.status&&(document.getElementById(n).innerHTML=a.responseText)},document.getElementById(n).innerHTML=i,window.XMLHttpRequest?((a=new XMLHttpRequest).onreadystatechange=processReqChange,a.open("GET",t,!0),a.send(null)):window.ActiveXObject&&(a=new ActiveXObject("Microsoft.XMLHTTP"))&&(a.onreadystatechange=processReqChange,a.open("GET",t,!0),a.send())},dtCh="/",minYear=1800,maxYear=2200,dtFormat=[0,1,2],dtExample="12/31/2016",isInteger=function(t){var e;for(e=0;e<t.length;e++){var i=t.charAt(e);if(i<"0"||"9"<i)return!1}return!0},stripCharsInBag=function(t,e){var i,a="";for(i=0;i<t.length;i++){var n=t.charAt(i);-1==e.indexOf(n)&&(a+=n)}return a},daysInFebruary=function(t){return t%4!=0||t%100==0&&t%400!=0?28:29},DaysArray=function(t){for(var e=1;e<=t;e++)this[e]=31,4!=e&&6!=e&&9!=e&&11!=e||(this[e]=30),2==e&&(this[e]=29);return this},parseDateTimeSelector=function(t){if(isDate($(".datepicker.mura-datepicker"+t).val())){var e=$(".datepicker.mura-datepicker"+t).val(),i=(DaysArray(12),e.split(dtCh)),a=i[dtFormat[0]],n=i[dtFormat[1]],o=i[dtFormat[2]],r=$("#mura-"+t+"Minute").length?$("#mura-"+t+"Minute").val():0,s=$("#mura-"+t+"Hour").length?$("#mura-"+t+"Hour").val():0;$("#mura-"+t+"DayPart").length&&("pm"==$("#mura-"+t+"DayPart").val().toLowerCase()?24==(s=parseInt(s)+12)&&(s=12):12==parseInt(s)&&(s=0)),1==s.length&&(s="0"+s),1==r.length&&(r="0"+r);var l="{ts '"+o+"-"+a+"-"+n+" "+s+":"+r+":00'}";$("#mura-"+t).val(l)}else $("#mura-"+t).val("")},isDate=function(t){var e=DaysArray(12),i=t.split(dtCh);if(3!=i.length)return!1;var a=i[dtFormat[0]],n=i[dtFormat[1]],o=i[dtFormat[2]];strYr=o,"0"==n.charAt(0)&&1<n.length&&(n=n.substring(1)),"0"==a.charAt(0)&&1<a.length&&(a=a.substring(1));for(var r=1;r<=3;r++)"0"==strYr.charAt(0)&&1<strYr.length&&(strYr=strYr.substring(1));return month=parseInt(a),day=parseInt(n),year=parseInt(strYr),!(month<1||12<month||day<1||31<day||2==month&&day>daysInFebruary(year)||day>e[month]||4!=o.length||0==year||year<minYear||year>maxYear||0==isInteger(stripCharsInBag(t,dtCh)))},isEmail=function(t){var e=t;return-1!=e.indexOf("@")&&-1!=e.indexOf(".")},isColor=function(t){var e,i=0,a=t.replace(/ +/g,"").match(/(rgba?)|(\d+(\.\d+)?%?)|(\.\d+)/g);if(a&&3<a.length){for(;i<3;){if((e=-1!=(e=a[++i]).indexOf("%")?Math.round(2.55*parseFloat(e)):parseInt(e))<0||255<e)return NaN;a[i]=e}if(0===t.indexOf("rgba")){if(null==a[4]||a[4]<0||1<a[4])return NaN}else if(a[4])return NaN;return a[0]+"("+a.slice(1).join(",")+")"}return NaN},isURL=function(t){return urlPattern=/(http|ftp|https):\/\/[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-])?/,t.match(urlPattern)},stripe=function(t){$("table."+t+" tr").each((function(t){t%2?$(this).addClass("alt"):$(this).removeClass("alt")})),$("div.mura-grid."+t+" dl").each((function(t){t%2?$(this).addClass("alt"):$(this).removeClass("alt")}))},toggleDisplay=function(t,e,i){"none"==document.getElementById(t).style.display?(document.getElementById(t).style.display="",document.getElementById(t+"Link")&&(document.getElementById(t+"Link").innerHTML="["+i+"]")):(document.getElementById(t).style.display="none",document.getElementById(t+"Link")&&(document.getElementById(t+"Link").innerHTML="["+e+"]"))},openDisplay=function(t,e){"none"==document.getElementById(t).style.display&&($("#"+t).slideDown(),"editAdditionalTitles"==t&&$("#alertTitleSuccess").hide(),document.getElementById(t+"Link")&&(document.getElementById(t+"Link").innerHTML="["+e+"]"),document.getElementById(t).style.display="")},toggleDisplay2=function(t,e){document.getElementById(t).style.display=1==e?"":"none"},validate=function(t){return validateForm(t)},getValidationFieldName=function(t){return null!=t.getAttribute("data-label")?t.getAttribute("data-label"):null!=t.getAttribute("label")?t.getAttribute("label"):t.getAttribute("name")},getValidationIsRequired=function(t){return null!=t.getAttribute("data-required")?"true"==t.getAttribute("data-required").toLowerCase():null!=t.getAttribute("required")&&"true"==t.getAttribute("required").toLowerCase()},getValidationMessage=function(t,e){return null!=t.getAttribute("data-message")?t.getAttribute("data-message")+"<br/>":null!=t.getAttribute("message")?t.getAttribute("message")+"<br/>":getValidationFieldName(t).toUpperCase()+e+"<br/>"},getValidationType=function(t){return null!=t.getAttribute("data-validate")?t.getAttribute("data-validate").toUpperCase():null!=t.getAttribute("validate")?t.getAttribute("validate").toUpperCase():""},hasValidationMatchField=function(t){return null!=t.getAttribute("data-matchfield")&&""!=t.getAttribute("data-matchfield")||null!=t.getAttribute("matchfield")&&""!=t.getAttribute("matchfield")},getValidationMatchField=function(t){return null!=t.getAttribute("data-matchfield")?t.getAttribute("data-matchfield"):null!=t.getAttribute("matchfield")?t.getAttribute("matchfield"):""},hasValidationRegex=function(t){return null!=t.value&&(null!=t.getAttribute("data-regex")&&""!=t.getAttribute("data-regex")||null!=t.getAttribute("regex")&&""!=t.getAttribute("regex")||void 0)},getValidationRegex=function(t){return null!=t.getAttribute("data-regex")?t.getAttribute("data-regex"):null!=t.getAttribute("regex")?t.getAttribute("regex"):""},validateForm=function(t){var e,i,a="",n=!1,o="",r=t.getElementsByTagName("input");for(f=0;f<r.length;f++)if(theField=r[f],o=getValidationType(theField),""==theField.style.display)if(getValidationIsRequired(theField)&&""==theField.value)n||(n=!0,e=f,i="input"),a+=getValidationMessage(theField," is required.");else if(""!=o)if("EMAIL"!=o||""==theField.value||isEmail(theField.value))if("NUMERIC"==o&&""!=theField.value&&isNaN(theField.value))isNaN(theField.value.replace(/\$|\,|\%/g,""))?(n||(n=!0,e=f,i="input"),a+=getValidationMessage(theField," must be numeric.")):theField.value=theField.value.replace(/\$|\,|\%/g,"");else if("COLOR"==o&&""!=theField.value)isColor(theField.value)||(n||(n=!0,e=f,i="input"),a+=getValidationMessage(theField," is not a valid color."));else if("URL"==o&&""!=theField.value)isURL(theField.value)||(n||(n=!0,e=f,i="input"),a+=getValidationMessage(theField," is not a valid URL."));else if("REGEX"==o&&""!=theField.value&&hasValidationRegex(theField)){var s=new RegExp(getValidationRegex(theField));theField.value.match(s)||(n||(n=!0,e=f,i="input"),a+=getValidationMessage(theField," is not valid."))}else"MATCH"==o&&hasValidationMatchField(theField)&&theField.value!=t[getValidationMatchField(theField)].value?(n||(n=!0,e=f,i="input"),a+=getValidationMessage(theField," must match"+getValidationMatchField(theField)+".")):"DATE"!=o&&"DATETIME"!=o||""==theField.value||isDate(theField.value)||(n||(n=!0,e=f,i="input"),a+=getValidationMessage(theField," must be a valid date [MM/DD/YYYY]."));else n||(n=!0,e=f,i="input"),a+=getValidationMessage(theField," must be a valid email address.");var l=t.getElementsByTagName("textarea");for(f=0;f<l.length;f++)theField=l[f],o=getValidationType(theField),""==theField.style.display&&getValidationIsRequired(theField)&&""==theField.value?(n||(n=!0,e=f,i="textarea"),a+=getValidationMessage(theField," is required.")):""!=o&&"REGEX"==o&&""!=theField.value&&hasValidationRegex(theField)&&(s=new RegExp(getValidationRegex(theField)),theField.value.match(s)||(n||(n=!0,e=f,i="input"),a+=getValidationMessage(theField," is not valid.")));var c=t.getElementsByTagName("select");for(f=0;f<c.length;f++)theField=c[f],o=getValidationType(theField),""==theField.style.display&&getValidationIsRequired(theField)&&""==theField.options[theField.selectedIndex].value&&(n||(n=!0,e=f,i="select"),a+=getValidationMessage(theField," is required."));return""==a||("input"==i?r[e].focus():"textarea"==i?l[e].focus():"select"==i&&c[e].focus(),$("#alertDialogMessage").html(a),$("#alertDialog").attr("title","Alert"),$("#alertDialog").dialog({resizable:!1,modal:!0,position:getDialogPosition(),buttons:{Ok:{click:function(){$(this).dialog("close"),"input"==i?r[e].focus():"textarea"==i?l[e].focus():"select"==i&&c[e].focus()},text:"OK",class:"mura-primary"}}}),!1)},submitForm=function(t,e,i){var a=i,n=t;if(validateForm(t)){if(void 0!==e&&"delete"!=e){var o=t.getElementsByTagName("input");for(f=0;f<o.length;f++)"action"==o[f].getAttribute("name")&&o[f].setAttribute("value",e)}else if("delete"==e)return $("#alertDialogMessage").html(a),$("#alertDialog").dialog({modal:!0,position:getDialogPosition(),resizable:!1,dialogClass:"dialog-warning",width:400,buttons:{Yes:{click:function(){$(this).dialog("close");var t=n.getElementsByTagName("input");for(f=0;f<t.length;f++)"action"==t[f].getAttribute("name")&&t[f].setAttribute("value",e);n.submit()},text:"Yes",class:"mura-primary"},No:function(){$(this).dialog("close")}}}),!1;if("undefined"!=typeof htmlEditorType&&"fckeditor"!=htmlEditorType)for(var r in CKEDITOR.instances)void 0!==CKEDITOR.instances[r]&&null!=CKEDITOR.instances[r]&&$("#"+r).length&&CKEDITOR.instances[r].updateElement();actionModal((function(){t.submit(),formSubmitted=!0}))}return!1},testEmail=function(t){t.preventDefault();$("#emailTestDialog").remove(),$("body").append('<div id="emailTestDialog" title="Loading..." style="display:none"></div>');let e={};e.mailSmtpPort=$('input[name="MailServerSMTPPort"]').val(),e.mailHost=$('input[name="MailServerIP"]').val(),e.mailUsername=$('input[name="MailServerUserName"]').val(),e.mailPassword=$('input[name="MailServerPassword"]').val(),e.mailUseTLS=$('input[name="mailServerTLS"]:checked').val(),e.mailUseSSL=$('input[name="mailServerSSL"]:checked').val();$("#emailTestDialog").dialog({resizable:!1,modal:!0,title:"Testing Email Connection",width:400,position:getDialogPosition(),open:function(){$("#emailTestDialog").html('<div class="ui-dialog-content ui-widget-content"><div class="load-inline"></div></div>'),$("#emailTestDialog .load-inline").spin(spinnerArgs2),$.post("index.cfm?muraAction=cArch.emailTest&compactDisplay=true",e,(function(t){$("#emailTestDialog .load-inline").spin(!1),$("#emailTestDialog").html(t)})).fail((function(t){$("#emailTestDialog .load-inline").spin(!1),$("#emailTestDialog").html(t.responseText)}))},close:function(){$(this).dialog("destroy"),$("#emailTestDialog").remove()}})},actionModal=function(t){return $("body").append('<div id="action-modal" class="modal-backdrop fade in"></div>'),$("#action-modal").spin(spinnerArgs),t&&("string"==typeof t?location.href=t:t()),!1},preview=function(t,e){return newWindow=""==e?window.open(t,"previewWin"):window.open(t,"previewWin",e),!newWindow||newWindow.closed||void 0===newWindow.closed?alertDialog("pop-up window has been blocked for this site,Disable blocking pop-up windows to see the Site Preview"):newWindow.focus(),!1},createCookie=function(t,e,i){if(i){var a=new Date;a.setTime(a.getTime()+24*i*60*60*1e3);var n="; expires="+a.toGMTString()}else n="";"undefined"!=typeof location&&"https:"==location.protocol?secure="; secure":secure="",document.cookie=t+"="+e+n+"; path=/"+secure},readCookie=function(t){for(var e=t+"=",i=document.cookie.split(";"),a=0;a<i.length;a++){for(var n=i[a];" "==n.charAt(0);)n=n.substring(1,n.length);if(0==n.indexOf(e))return unescape(n.substring(e.length,n.length))}return""},eraseCookie=function(t){createCookie(t,"",-1)},newWindow=null,markdownInstances={},setMarkdownEditors=function(t){t=t||"textarea.mura-markdown, textarea.markdownEditor",Mura(t).forEach((function(){var t=Mura(this);t.hide();var e="mura-markdown-"+t.attr("name");if(void 0===markdownInstances[t.attr("name")]){t.after('<div class="mura-markdown-editor" id="'+e+'" data-target="'+t.attr("name")+'">'+t.val()+"</div>");var i=t.data("height")||"300px",a=t.data("previewstyle")||"tabs",n=t.data("initialedittype")||"wysiwyg";markdownInstances[t.attr("name")]=new markdownEditor({el:document.getElementById(e),initialEditType:n,previewStyle:a,height:i})}}))},HTMLEditorLoadCount=0,setHTMLEditors=function(t){t=t||"textarea.mura-html, textarea.htmlEditor",Mura(t).forEach((function(t){if(!t.getAttribute("mura-inprocess")){t.setAttribute("mura-inprocess","true");var e=CKEDITOR.instances[t.id];void 0!==e&&null!=e&&CKEDITOR.remove(e),""==Mura(document.getElementById(t.id)).val()&&Mura(document.getElementById(t.id)).val("<p></p>");var i=t.getAttribute("data-toolbar")||"Default";$(document.getElementById(t.id)).ckeditor({toolbar:i,customConfig:"config.js.cfm"},htmlEditorOnComplete)}}))},htmlEditorOnComplete=function(t){$(t).ckeditorGet().resetDirty();var e=CKEDITOR.instances;HTMLEditorLoadCount++;var i=0;for(k in e)i++;try{document.getElementById("actionButtons").style.display=i<=HTMLEditorLoadCount?"block":"none"}catch(t){}},setDatePickers=function(t,e,i){if(null==$.datepicker.regional[e])var a=e.substring(0,2);else a=e;null!=$.datepicker.regional[a]?$(t).each((function(t){$(this).datepicker($.datepicker.regional[a]).datepicker("option","changeYear",!0).datepicker("option","changeMonth",!0)})):$(t).each((function(t){$(this).datepicker($.datepicker.regional[""]).datepicker("option","changeYear",!0).datepicker("option","changeMonth",!0)})),$(t).each((function(t){"mura-datepicker-displayStart"==$(this).attr("id")&&""==$(this).val()&&$(this).datepicker("setDate",new Date)}))},setColorPickers=function(t){var e={},i=!1;if("undefined"!=typeof themeColorOptions&&Array.isArray(themeColorOptions)&&themeColorOptions.length){for(var a=0;a<themeColorOptions.length;a++)void 0!==themeColorOptions[a].value?e[themeColorOptions[a].value]=themeColorOptions[a].value:e[themeColorOptions[a].VALUE]=themeColorOptions[a].VALUE;i=!0}$(t).each((function(t){i?$(this).colorpicker({align:"left",colorSelectors:e}):$(this).colorpicker({align:"left"})}))},setToolTips=function(t){"function"==typeof $(t).tooltip&&$(t).tooltip({selector:"a[rel=tooltip]"}),$(t+" a[rel=tooltip]").click((function(t){return t.preventDefault(),!1})),"function"==typeof $(t).popover&&$(t+' [data-toggle="popover"]').popover("destroy").popover({trigger:"hover",html:!0})},setTabs=function(t,e){if($(".tab-preloader").spin(spinnerArgs2),$(t+" a").click((function(t){t.preventDefault(),$(this).tab("show")})),""!=window.location.hash)$(t+' a[href="'+window.location.hash+'"]').tab("show"),window.setTimeout((function(){$("a span.display-tab").html('<i class="mi-chevron-down"></i>')}),1);else if(void 0!==e)try{$(t+" li::nth-child("+(e+1)+") a").tab("show")}catch(e){$(t+" li:first a").tab&&$(t+" li:first a").tab("show")}else $(t+" li:first a").tab("show");$(".tab-preloader").hide().spin(!1)},setAccordions=function(t,e){$(t).each((function(t){null!=e?$(this).accordion({active:e}):$(this).accordion()}))},setCheckboxTrees=function(){$(".checkboxTree").each((function(){$(this).collapsibleCheckboxTree({checkParents:!1,checkChildren:!1,uncheckChildren:!0,initialState:"default"})}))},openFileMetaData=function(t,e,i,a){try{"undefined"==typeof fileMetaDataAssign&&(fileMetaDataAssign={}),$("#newFileMetaContainer").remove(),$("body").append('<div id="newFileMetaContainer" title="Loading..." style="display:none"><div id="newFileMeta"><div class="load-inline"></div></div></div>');var n=$.ui.dialog.prototype._focusTabbable;$.ui.dialog.prototype._focusTabbable=function(){},$("#newFileMetaContainer").dialog({resizable:!1,modal:!0,width:600,title:"Edit Image Properties",position:getDialogPosition(),buttons:{Cancel:function(){$(this).dialog("close")},Save:{click:function(){var t={exifpartial:{}};$(".filemeta").each((function(){t[$(this).attr("data-property")]=$(this).val()})),$(".exif").each((function(){t.exifpartial[$(this).attr("data-property")]=$(this).val()})),t.setasdefault=$("#filemeta-setasdefault").is(":checked"),fileMetaDataAssign[a]=t,$("#filemetadataassign").val(JSON.stringify(fileMetaDataAssign)),$(this).dialog("close")},text:"Save",class:"mura-primary"}},open:function(){$(".ui-widget-overlay").css("z-index",500),$(".ui-dialog").css("z-index",501),$("#newFileMetaContainer").html('<div class="ui-dialog-content ui-widget-content"><div class="load-inline"></div></div>');var n="muraAction=cArch.loadfilemetadata&fileid="+e+"&property="+a+"&contenthistid="+t+"&siteid="+i+"&cacheid="+Math.random();$("#newFileMetaContainer .load-inline").spin(spinnerArgs2),Mura.get("index.cfm?"+n).then((function(t){if(-1!=t.indexOf("mura-primary-login-token")&&(location.href="./"),$("#newFileMetaContainer .load-inline").spin(!1),$("#newFileMetaContainer").html(t),a in fileMetaDataAssign){var e=fileMetaDataAssign[a];for(var i in e)$('.filemeta[data-property="'+i+'"]').val(e[i]);$("#filemeta-setasdefault").prop("checked",e.setasdefault)}$("#newFileMetaContainer .htmlEditor").ckeditor({toolbar:"Basic",height:100,customConfig:"config.js.cfm"},htmlEditorOnComplete),setTabs("#newFileMetaContainer.tabs",0),setDatePickers(".datepicker",dtLocale),$("#newFileMetaContainer").dialog("option","position",getDialogPosition()),$(".filemeta:first").focus()}),(function(t){$("#newFileMetaContainer").html(t.responseText),$("#newFileMetaContainer").dialog("option","position",getDialogPosition())}))},close:function(){$(this).dialog("destroy"),$("#newFileMetaContainer").remove(),$.ui.dialog.prototype._focusTabbable=n}})}catch(n){console.log(n)}return!1},setFileSelectors=function(){$(".mura-file-selector").fileselector()},alertDialog=function(t,e,i,a,n){if(a=a||450,"object"==typeof t){var o=t;t=o.message||"Message not defined",e=o.okAction||function(){},i=o.title||"Alert",a=o.width||0}i=i||"Alert";var r={dialogClass:n=n||"dialog-warning",resizable:!1,modal:!0,position:getDialogPosition(),buttons:{Ok:{click:function(){$(this).dialog("close"),e&&("function"==typeof e?e():"string"==typeof e&&""!=e&&actionModal(e))},text:"OK",class:"mura-primary"}}};return a&&(r.width=a),$("#alertDialog").attr("title",i),$("#alertDialogMessage").html(t),$("#alertDialog").dialog(r),!1},confirmDialog=function(t,e,i,a,n,o,r,s){if(n=n||450,"object"==typeof t){var l=t;t=l.message||"Message not defined",l.yesAction&&(e=l.yesAction),l.noAction&&(i=l.noAction),a=l.title||"Alert",n=l.width||0}a=a||"Alert",o=o||"OK",r=r||"Cancel";var c={dialogClass:s=s||"dialog-confirm",resizable:!1,modal:!0,position:getDialogPosition(),buttons:{No:{click:function(){void 0!==i&&""!=i?"function"==typeof i?i():actionModal(i):$(this).dialog("destroy")},text:r,class:"mura-cancel"},Yes:{click:function(){$(this).dialog("close"),"function"==typeof e?e():""!=e&&actionModal(e)},text:o,class:"mura-primary"}},close:function(t,e){$(this).dialog("destroy")}};return n&&(c.width=n),$("#alertDialog").attr("title",a),$("#alertDialogMessage").html(t),$("#alertDialog").dialog(c),!1},i=window.jQuery,a=function(t,e){var a=this.$element=i(t),n=this.options=i.extend({},i.fn.fileselector.defaults,e);i(this.$element).attr("data-name")&&(this.options.file=this.$element.attr("data-name"));var o=function(t){var e="muraAction=cArch.assocfiles&compactDisplay=true&siteid="+a.attr("data-siteid")+"&fileid="+a.attr("data-fileid")+"&type="+a.attr("data-filetype")+"&contentid="+a.attr("data-contentid")+"&property="+a.attr("data-property")+"&keywords="+t+"&cacheid="+Math.random();a.find(".mura-file-existing").html('<div class="load-inline"></div>'),a.find(".load-inline").spin(spinnerArgs2),i.ajax("index.cfm?"+e).done((function(t){a.find(".load-inline").spin(!1),a.find(".mura-file-existing").html(t);var e=a.find(".mura-file-existing").find(".filesearch").val();a.find(".mura-file-existing").find(".filesearch").focus().val("").val(e),a.find(".mura-file-existing").find(".filesearch").keypress((function(t){if(13==t.which){a.find(".mura-file-existing").find(".filesearch");var e=a.find(".mura-file-existing").find(".filesearch + .btn");return i(e).trigger("click"),!1}})),a.find(".mura-file-existing").find(".btn").click((function(){o(a.find(".mura-file-existing").find(".filesearch").val())})),setTabs("#selectAssocImageResults-"+a.attr("data-property"),0)})).fail((function(t){a.find(".load-inline").spin(!1),a.find(".mura-file-existing").html(t.responseText)}))},r=function(t){a.find(".mura-file-option").find("input").val(""),a.find(".mura-file-option").find(".btn").hide(),a.find(".mura-file-option").hide(),a.find(".mura-file-"+t.toLowerCase()).show(),a.find(".mura-file-option").find("input").attr("name",""),a.find(".mura-file-"+t.toLowerCase()).find("input").attr("name",n.file)};i(this.$element).find("button.mura-file-type-selector").click((function(){r(i(this).val()),"existing"==i(this).val().toLowerCase()?o(""):(a.find(".mura-file-existing").html('<div class="load-inline"></div>'),a.find(".load-inline").spin(spinnerArgs2)),i(this).hasClass("btn")&&(i(this).addClass("focus").addClass("onstate").addClass("active"),i(this).siblings(".btn").removeClass("focus").removeClass("active").removeClass("onstate"))})),a.find(".mura-file-option").find("input").change((function(){/^(([a-zA-Z]:)|(\\{2}\w+)\$?)(\\(\w[\w].*))+(.jpg|.jpeg|.png|.gif|.svg)$/.test(i(this).val().toLowerCase())||/(http(s?):)|([\/|.|\w|\s])*\.(?:jpg|jpeg|gif|png|svg)/.test(i(this).val().toLowerCase())?i(this).parent().find(".file-meta-open").show():i(this).parent().find(".file-meta-open").hide()})),r("Upload")},i.fn.fileselector=function(t){return this.each((function(){var e=i(this),n=e.data("fileselector");n||e.data("fileselector",n=new a(this,t))}))},i.fn.fileselector.defaults={file:"newfile"},i.fn.fileselector.Constructor=a,start=new Date,start=Date.parse(start)/1e3,sessionTimeout=10800,CountDown=function(){var t=new Date;t=Date.parse(t)/1e3;var e=parseInt(sessionTimeout-(t-start),10),i=Math.floor(e/3600),a=Math.floor((e-3600*i)/60),n=e-(3600*i+60*a);a=a<=9?"0"+a:a,n=n<=9?"0"+n:n,null!=document.getElementById("clock").innerHTML&&(document.getElementById("clock").innerHTML=i+":"+a+":"+n),0<e?timerID=setTimeout("CountDown()",100):null!=document.getElementById("clock").innerHTML&&(document.getElementById("clock").innerHTML="0:0:0")},fileManagerPopUp=function(){},fileManagerCreate=function(){},loadjscssfile=function(t,e){if("js"==e)(i=document.createElement("script")).setAttribute("type","text/javascript"),i.setAttribute("src",t);else if("css"==e){var i;(i=document.createElement("link")).setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("href",t)}void 0!==i&&document.getElementsByTagName("head")[0].appendChild(i)},getDialogPosition=function(){return{my:"center",at:"center",of:window,collision:"fit"}},openPreviewDialog=function(t){var e=t;e=-1==e.indexOf("?")?t+"?muraadminpreview":t+"&muraadminpreview";var i=["top",20],a=$('<div id="mura-preview-container"></div>').html('<iframe id="preview-dialog" style="border: 0; background:#fff;" src="'+e+'&mobileFormat=false" width="1075" height="600" allowfullscreen></iframe>').dialog({width:1105,height:600,modal:!0,title:"Preview",position:i,resize:function(t,e){$("#preview-dialog").attr("width",e.size.width-25)},close:function(){$(a).dialog("destroy"),$("#mura-preview-container").remove(),$("#mura-preview-device-selector").remove()},open:function(){$(".ui-dialog").prepend('<div id="mura-preview-device-selector"><p>Preview Mode</p><a class="mura-device-standard active" data-height="600" data-width="1075" data-mobileformat="false"><i class="mi-desktop"></i></a><a class="mura-device-tablet" data-height="600" data-width="768" data-mobileformat="false"><i class="mi-tablet"></i></a><a class="mura-device-tablet-landscape" data-height="480" data-width="1024" data-mobileformat="false"><i class="mi-tablet mi-rotate-270"></i></a><a class="mura-device-phone" data-height="480" data-width="320" data-mobileformat="true"><i class="mi-mobile-phone"></i></a><a class="mura-device-phone-landscape" data-height="250" data-width="520" data-mobileformat="true"><i class="mi-mobile-phone mi-rotate-270"></i></a></div>'),$("#mura-preview-device-selector a").bind("click",(function(){var t=$(this).data();return $(a).dialog("option","width",t.width+30),$(a).dialog("option","height",t.height+124),$("#preview-dialog").attr("width",t.width).attr("height",t.height).attr("src",e+"&mobileFormat="+t.mobileformat),$(a).dialog("option","position",i),$("#mura-preview-device-selector a").removeClass("active"),$(this).addClass("active"),!1}))}});return!1},preloadimages=function(t){for(var e=[],i=(t="object"!=typeof t?[t]:t,0);i<t.length;i++)e[i]=new Image,e[i].src=t[i]},spinnerArgs={lines:17,length:7,width:4,radius:13,corners:1,rotate:0,color:"#696969",speed:.9,trail:60,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"auto",left:"auto"},spinnerArgs2={lines:17,length:7,width:4,radius:13,corners:1,rotate:0,color:"#696969",speed:.9,trail:60,shadow:!1,hwaccel:!1,className:"spinner-alt",zIndex:2e9,top:"auto",left:"auto",position:"relative"},spinnerArgs3={lines:17,length:7,width:4,radius:13,corners:1,rotate:0,color:"#696969",speed:.9,trail:60,shadow:!1,hwaccel:!1,className:"spinner-alt",zIndex:2e9,top:"auto",left:"auto",position:"relative"},removePunctuation=function(t){$(t).val($(t).val().replace(/[^\w\s-]|/g,"").replace(/\s+/g,""))},setLowerCaseKeys=function(t){for(var e=Object.keys(t),i=e.length;i--;){var a=e[i];a!==a.toLowerCase()&&(t[a.toLowerCase()]=t[a],delete t[a]),"object"==typeof t[a.toLowerCase()]&&setLowerCaseKeys(t[a.toLowerCase()])}return t},setFinders=function(t,e){window.self!==window.top?(Mura.getQueryStringParams(location.search),Mura(t).click((function(){var t=Mura(this);siteManager.openDisplayObjectModal("filebrowser/modal.cfm",{target:t.data("target"),completepath:t.data("completepath")})}))):$(t).unbind("click").on("click",(function(){var t=Mura(this),i=parseInt(Mura("#mura-content").width())-120;$("#alertDialogMessage").html('<div id="MuraFileBrowserContainer"></div>'),$("#alertDialog").attr("title","Select File"),$("#alertDialog").dialog({resizable:!1,width:i,minWidth:712,open:function(i,a){var n=this;MuraFileBrowser.config.height=600,MuraFileBrowser.config.selectMode=2,MuraFileBrowser.config.resourcepath="Application_Root",void 0!==e&&Mura.extend(MuraFileBrowser.config,e),MuraFileBrowser.config.selectCallback=function(e){var i=$('input[name="'+t.data("target")+'"]'),a=t.attr("data-serverpath");a&&"true"==a.toLowerCase()?e.url.indexOf(rootpath)>-1?i.val(webroot+e.url.substring(rootpath.length,e.url.length)):i.val(webroot+e.url):i.val(e.url),console.log(e),i.trigger("change"),$(n).dialog("close")},MuraFileBrowser.render()},modal:!0,position:{my:"center",at:"top",of:"#mura-content",collision:"fit"},buttons:{}})}))},wireupExterndalUIWidgets=function(){setFinders(".mura-ckfinder, .mura-finder"),"undefined"!=typeof dtLocale&&setDatePickers(".datepicker",dtLocale),"undefined"!=typeof activetab&&setTabs(".mura-tabs",activetab),setHTMLEditors(),setMarkdownEditors(),"undefined"!=typeof activepanel&&setAccordions(".accordion",activepanel),setCheckboxTrees(),setColorPickers(".mura-colorpicker"),setToolTips(".container"),setFileSelectors()},showTableControls=function(t){var e=$(t).next(".actions-menu");$("td.actions div.actions-menu").not(".hide").addClass("hide"),$(e).removeClass("hide")},void 0!==$.ui&&($.widget("custom.muraSiteSelector",$.ui.autocomplete,{_suggest:function(t){var e=this.element.closest("ul");e.children("li").remove(),this._renderMenu(e,t),this.isNewMenu=!0,this.menu.refresh(),e.show(),this._resizeMenu(),this.options.autoFocus&&this.menu.next()},_renderItem:function(t,e){return $("<li>").append($("<a>").attr("href","?muraAction=cDashboard.main&siteID="+e.id).append($("<i>").addClass("mi-globe")).append(e.label)).appendTo(t)},options:{create:function(t){$(t.target).keyup((function(t,e){var i=$(this);i.val().length<$(this).data("customMuraSiteSelector").option("minLength")&&i.closest("ul").children("li").remove()}))}}}),$((function(){$('input[name="site-search"]').muraSiteSelector({source:function(t,e){$.ajax({url:"./index.cfm?muraAction=cnav.searchsitedata",dataType:"json",method:"POST",data:{searchString:t.term},success:function(t){return e(t)}})},minLength:2})}))),$((function(){wireupExterndalUIWidgets()}))},function(t,e){dashboardManager={loadUserActivity:function(t){var e="muraAction=cDashboard.loadUserActivity&siteID="+t+"&cacheid="+Math.random(),i=$("#userActivityData");return i.html('<div class="load-inline"></div>'),$("#userActivityData .load-inline").spin(spinnerArgs2),$.get("index.cfm?"+e,(function(t){$("#userActivityData .load-inline").spin(!1),document.getElementById("userActivityData").innerHTML=t,i.animate({opacity:"hide"},1e3,null,(function(){i.animate({opacity:"show"},1e3)}))})),!1},loadPopularContent:function(t){var e="muraAction=cDashboard.loadPopularContent&siteID="+t+"&cacheid="+Math.random(),i=$("#popularContentData");return i.html('<div class="load-inline"></div>'),$("#popularContentData .load-inline").spin(spinnerArgs2),$.get("index.cfm?"+e,(function(t){$("#popularContentData .load-inline").spin(!1),document.getElementById("popularContentData").innerHTML=t,i.animate({opacity:"hide"},1e3,null,(function(){i.animate({opacity:"show"},1e3)}))})),!1},loadRecentComments:function(t){var e="muraAction=cDashboard.loadRecentComments&siteID="+t+"&cacheid="+Math.random(),i=$("#recentCommentsData");return i.html('<div class="load-inline"></div>'),$("#recentCommentsData .load-inline").spin(spinnerArgs2),$.get("index.cfm?"+e,(function(t){$("#recentCommentsData .load-inline").spin(!1),document.getElementById("recentCommentsData").innerHTML=t,i.animate({opacity:"hide"},1e3,null,(function(){i.animate({opacity:"show"},1e3)}))})),!1},loadFormActivity:function(t){var e="muraAction=cDashboard.loadFormActivity&siteID="+t+"&cacheid="+Math.random(),i=$("#recentFormActivityData");return i.html('<div class="load-inline"></div>'),$("#recentFormActivityData .load-inline").spin(spinnerArgs2),$.get("index.cfm?"+e,(function(t){$("#recentFormActivityData .load-inline").spin(!1),document.getElementById("recentFormActivityData").innerHTML=t,i.animate({opacity:"hide"},1e3,null,(function(){i.animate({opacity:"show"},1e3)}))})),!1},loadEmailActivity:function(t){var e="muraAction=cDashboard.loadEmailActivity&siteID="+t+"&cacheid="+Math.random(),i=$("#emailBroadcastsData");return i.html('<div class="load-inline"></div>'),$("#emailBroadcastsData .load-inline").spin(spinnerArgs2),$.get("index.cfm?"+e,(function(t){$("#emailBroadcastsData .load-inline").spin(!1),document.getElementById("emailBroadcastsData").innerHTML=t,i.animate({opacity:"hide"},1e3,null,(function(){i.animate({opacity:"show"},1e3)}))})),!1}}},function(t,e){},function(t,e){extendManager={showSaveSort:function(t){$("#showSort").hide(),$("#saveSort").show(),$(".handle").each((function(t){$(this).show()})),this.setSortable(t)},showSort:function(t){$("#showSort").show(),$("#saveSort").hide(),$(".handle").each((function(t){$(this).hide()})),$("#"+t).sortable("destroy"),$("#"+t).enableSelection()},showRelatedSaveSort:function(t){$("#showRelatedSort").hide(),$("#saveRelatedSort").show(),$(".handleRelated").each((function(t){$(this).show()})),this.setSortable(t)},showRelatedSort:function(t){$("#showRelatedSort").show(),$("#saveRelatedSort").hide(),$(".handleRelated").each((function(t){$(this).hide()})),$("#"+t).sortable("destroy"),$("#"+t).enableSelection()},saveAttributeSort:function(t){var e=new Array;$("#"+t+" > li").each((function(t){e.push($(this).attr("attributeID"))}));var i="muraAction=cExtend.saveAttributeSort&attributeID="+e.toString()+"&cacheID="+Math.random();$.get("index.cfm?"+i),this.showSort(t)},saveExtendSetSort:function(t){var e=new Array;$("#"+t+" > li").each((function(t){e.push($(this).attr("extendSetID"))}));var i="muraAction=cExtend.saveExtendSetSort&extendSetID="+e.toString()+"&cacheID="+Math.random();$.get("index.cfm?"+i),this.showSort(t)},saveRelatedSetSort:function(t){var e=new Array;$("#"+t+" > li").each((function(t){e.push($(this).attr("relatedContentSetID"))}));var i="muraAction=cExtend.saveRelatedSetSort&relatedContentSetID="+e.toString()+"&cacheID="+Math.random();$.get("index.cfm?"+i),this.showRelatedSort(t)},setSortable:function(t){$("#"+t).sortable(),$("#"+t).disableSelection()},setBaseInfo:function(t){var e=t.split("^");document.subTypeFrm.type.value=e[0],e.length>1&&(document.subTypeFrm.baseTable.value=e[1],document.subTypeFrm.baseKeyField.value=e[2],document.subTypeFrm.dataTable.value=e[3]),""==e[0]?($(".hasRow1Container").hide(),$(".subTypeContainer").hide(),$(".SubTypeIconSelect").hide(),$(".hasSummaryContainer").hide(),$(".hasBodyContainer").hide(),$(".hasConfiguratorContainer").hide(),$(".availableSubTypesContainer").hide(),$(".hasAssocFileContainer").hide(),$(".adminOnlyContainer").hide()):"Site"==e[0]?($(".hasRow1Container").hide(),$(".subTypeContainer").hide(),$(".SubTypeIconSelect").hide(),$(".hasSummaryContainer").hide(),$(".hasBodyContainer").hide(),$(".hasConfiguratorContainer").hide(),$(".hasAssocFileContainer").hide(),$(".adminOnlyContainer").hide(),$("#subType").val("Default")):"1"==e[0]||"2"==e[0]||"Address"==e[0]||"Custom"==e[0]||"Base"==e[0]?($(".hasRow1Container").hide(),$(".subTypeContainer").show(),$(".SubTypeIconSelect").hide(),$(".hasSummaryContainer").hide(),$(".hasBodyContainer").hide(),$(".hasConfiguratorContainer").hide(),$(".availableSubTypesContainer").hide(),$(".hasAssocFileContainer").hide(),$(".adminOnlyContainer").hide()):"File"==e[0]||"Link"==e[0]?($(".hasRow1Container").show(),$(".subTypeContainer").show(),$(".SubTypeIconSelect").show(),$(".hasSummaryContainer").show(),$(".hasBodyContainer").hide(),$(".hasConfiguratorContainer").hide(),$(".availableSubTypesContainer").show(),"File"==e[0]?$(".hasAssocFileContainer").hide():$(".hasAssocFileContainer").show(),$(".adminOnlyContainer").show()):"Folder"==e[0]||"Gallery"==e[0]||"Calendar"==e[0]?($(".hasRow1Container").show(),$(".subTypeContainer").show(),$(".SubTypeIconSelect").show(),$(".hasSummaryContainer").show(),$(".hasBodyContainer").show(),"1"===$("input[name='isnew']").val()&&$("#hasConfiguratorYes").prop("checked",!0),$(".hasConfiguratorContainer").show(),$(".availableSubTypesContainer").show(),$(".hasAssocFileContainer").show(),$(".adminOnlyContainer").show()):"Form"==e[0]||"Component"==e[0]||"Variation"==e[0]?($(".subTypeContainer").show(),$(".SubTypeIconSelect").show(),"Variation"==e[0]?($(".hasRow1Container").hide(),$(".hasAssocFileContainer").hide(),$(".hasBodyContainer").hide()):($(".hasRow1Container").show(),$(".hasBodyContainer").show(),$(".hasAssocFileContainer").hide()),$(".hasSummaryContainer").hide(),"1"===$("input[name='isnew']").val()&&$("#hasConfiguratorYes").prop("checked",!0),$(".hasConfiguratorContainer").hide(),$(".availableSubTypesContainer").show(),$(".adminOnlyContainer").show()):($(".hasRow1Container").show(),$(".subTypeContainer").show(),$(".SubTypeIconSelect").show(),$(".hasSummaryContainer").show(),$(".hasBodyContainer").show(),$(".hasConfiguratorContainer").hide(),$(".availableSubTypesContainer").show(),$(".hasAssocFileContainer").show(),$(".adminOnlyContainer").show())}}},function(t,e){feedManager={loadSiteFilters:function(t,e,i,a){var n="muraAction=cFeed.loadSite&compactDisplay=true&siteid="+t+"&keywords="+e+"&isNew="+i+"&contentPoolID="+a+"&cacheid="+Math.random();$("#selectFilter").html('<div class="load-inline"></div>'),$("#selectFilter .load-inline").spin(spinnerArgs2),$.get("index.cfm?"+n,(function(t){$("#selectFilter").html(t)}))},addContentFilter:function(t,e,i){var a=document.getElementById("contentFilters").getElementsByTagName("TBODY")[0],n=document.createElement("TR");n.id="c"+t;var o=document.createElement("TD");o.className="var-width",$(o).html($("#"+decodeURI(i)).html());var r=document.createElement("TD");$(r).html(decodeURI(e));var s=document.createElement("TD");s.className="actions";var l=document.createElement("A");l.setAttribute("href","#"),l.setAttribute("title","Delete"),l.onclick=function(){return $("#c"+t).remove(),stripe("stripe"),!1};var c=document.createElement("I");c.setAttribute("class","mi-trash"),l.appendChild(c);var d=document.createElement("UL");d.className="clearfix";var u=document.createElement("LI");u.className="delete",u.appendChild(l),d.appendChild(u);var m=document.createElement("INPUT");m.setAttribute("type","hidden"),m.setAttribute("name","contentID"),m.setAttribute("value",t),s.appendChild(m),s.appendChild(d),n.appendChild(s),n.appendChild(o),n.appendChild(r),a.appendChild(n),$("#noFilters").length&&$("#noFilters").hide(),stripe("stripe")},removeFilter:function(t){return $("#"+t).remove(),stripe("stripe"),!1},loadSiteParents:function(t,e,i,a){var n="muraAction=cFeed.siteParents&compactDisplay=true&siteid="+t+"&parentid="+e+"&keywords="+i+"&isNew="+a+"&cacheid="+Math.random();$("#move").html('<div class="load-inline"><inut type=hidden name=parentid value='+e+" ></div>"),$("#move .load-inline").spin(spinnerArgs2),$.get("index.cfm?"+n,(function(t){$("#move").html(t)}))},confirmImport:function(){return $("#alertDialogMessage").html("Import Selections?"),$("#alertDialog").dialog({resizable:!1,modal:!0,buttons:{Yes:function(){$(this).dialog("close"),submitForm(document.forms.contentForm,"Import")},No:function(){$(this).dialog("close")}}}),!1},setDisplayListSort:function(){$("#availableListSort, #displayListSort").sortable({connectWith:".displayListSortOptions",update:function(t){t.stopPropagation(),$("#displayList").val(""),$("#displayListSort > li").each((function(){var t=$("#displayList").val();""!=t?$("#displayList").val(t+","+$.trim($(this).html())):$("#displayList").val($.trim($(this).html()))}))}}).disableSelection()},updateInstanceObject:function(){var t={};$("#tabDisplay").find(":input").each((function(){var e=$(this);("radio"!=e.attr("type")||"radio"==e.attr("type")&&e.is(":checked"))&&(t[e.attr("data-displayobjectparam")]=e.val())})),$("#instanceParams").val(JSON.stringify(t))}}},function(t,e){dataManager={addObject:function(t,e,i){if(null==document.getElementById(t)||-1==document.getElementById(t).selectedIndex)return alert("Please select a field."),!1;var a=document.getElementById(e),n=document.getElementById(t).selectedIndex;if(!(n<0)){var o=document.getElementById(t).options[n];if(a.options.length)for(var r=0;r<a.options.length;r++)if(a.options[r].value==o.value)return void(a.selectedIndex=r);var s=document.createElement("option");document.getElementById(e).appendChild(s),s.text=o.text,s.value=o.value,s.selected="selected",this.updateList(e,i)}},deleteObject:function(t,e){var i=document.getElementById(t),a=i.selectedIndex;i.options.length>1&&i.options.length;a<0||(i.options[a]=null,this.updateList(t,e),i.options.length&&(i.options[i.options.length-1].selected=!0))},updateList:function(t,e){var i=document.getElementById(t),a=document.getElementById(e);a.value="";for(var n=0;n<i.options.length;n++)""!=a.value?a.value+="^"+i.options[n].value:a.value=i.options[n].value},moveUp:function(t,e){var i=document.getElementById(t),a=i.selectedIndex;if(!(a<1)){var n=document.createElement("option"),o=document.createElement("option");n.text=i.options[a].text,n.value=i.value,n.selected="selected",o.text=i.options[a-1].text,o.value=i.options[a-1].value,i[a-1]=n,i[a]=o,this.updateList(t,e)}},moveDown:function(t,e){var i=document.getElementById(t),a=i.selectedIndex;if(a!=i.length-1){var n=document.createElement("option"),o=document.createElement("option");n.text=i.options[a].text,n.value=i.options[a].value,n.selected="selected",o.text=i.options[a+1].text,o.value=i.options[a+1].value,i.options[a+1]=n,i.options[a]=o,this.updateList(t,e)}}}},function(t,e){$searchParams={addSearchParam:function(){var t=$("#searchParams > .mura-control").length,e='<div class="mura-control justify">'+$("#searchParams > .mura-control").html()+"</div>";$("#searchParams").append(e);var i=$("#searchParams > .mura-control:last"),a=$("#searchParams > .mura-control:last > select"),n=$("#searchParams > .mura-control:last > input");a[0].selectedIndex=0,a[1].selectedIndex=0,a[2].selectedIndex=0,n[1].setAttribute("value",""),this.setSearchParamNames(i,t+1)},setSearchParamNames:function(t,e){var i=$(t).find("select"),a=$(t).find("input");i[0].setAttribute("name","paramRelationship"+e),i[1].setAttribute("name","paramField"+e),i[2].setAttribute("name","paramCondition"+e),a[0].setAttribute("value",e),a[1].setAttribute("name","paramCriteria"+e)},setSearchButtons:function(){var t=$("#searchParams > .mura-control"),e=t.length;if(1==e){var i=t.find("a");$(i[0]).hide(),$(i[1]).show(),t.find("select:first").hide()}else self=this,t.each((function(i){if(0==i){var a=$(t[i]).find("a");$(t[i]).find("select:first").hide(),$(a[0]).hide(),$(a[1]).hide()}else{a=$(t[i]).find("a");$(t[i]).find("select:first").show(),i!=e-1?($(a[0]).show(),$(a[1]).hide()):($(a[0]).show(),$(a[1]).show()),self.setSearchParamNames(t[i],i+1)}}));return!1},removeSeachParam:function(t){return new $(t).remove(),!1}}},function(module,exports){userManager={submitDialogs:[],submitActions:[],addSubmitDialog:function(t){userManager.submitDialogs.push(t)},addSubmitAction:function(t){userManager.submitActions.push(t)},submitForm:function(t,e){var i=0,a=userManager.submitDialogs,n=userManager.submitActions;return e&&(t.action.value=e),validateForm(t)&&function e(){for(r in CKEDITOR.instances)CKEDITOR.instances[r].updateElement();for(Mura("textarea.mura-markdown,textarea.markdownEditor").forEach((function(){var t=Mura(this);markdownInstances&&(markdownInstances[t.attr("name")],1)&&t.length&&t.val(markdownInstances[t.attr("name")].getValue())})),r=0;r<a.length;r++)if(r==i){var o=a[r];if("confirmation"==o.type.toLowerCase()){if("function"!=typeof o.condition)return confirmDialog($.extend(o,{yesAction:function(){i++,e()}})),!1;if(o.condition(o))return confirmDialog($.extend(o,{yesAction:function(){i++,e()}})),!1;i++}else if("alert"==o.type.toLowerCase()){if("function"!=typeof o.condition)return alertDialog($.extend(o,{okAction:function(){i++,e()}})),!1;if(o.condition(o))return alertDialog($.extend(o,{okAction:function(){i++,e()}})),!1;i++}else if("validation"==o.type.toLowerCase())if("function"==typeof o.condition){if(o.condition(o))return alertDialog($.extend(o,{okAction:function(){i++}})),!1;i++}else i++;else i++}if(i==a.length){for(var r=0;r<n.length;r++)n[r]();actionModal((function(){t.submit()}))}}(),!1},loadExtendedAttributes:function(t,e,i,a,n,o){var r="muraAction=cUsers.loadExtendedAttributes&baseID="+t+"&type="+e+"&subType="+i+"&siteID="+a+"&cacheid="+Math.random();siteID=a,context=n,themeAssetPath=o;var s=$("#extendSetsDefault");return s.length&&(s.html('<div class="load-inline"></div>'),$.ajax({url:"index.cfm?"+r,dataType:"text",success:function(t){-1!=t.indexOf("mura-primary-login-token")&&(location.href="./"),userManager.setExtendedAttributes(t)}})),!1},setExtendedAttributes:function(data){var r=eval("("+data+")");$("#extendSetsDefault").html(r.extended),$("#extendSetsBasic").html(r.basic),""==Mura.trim(r.extended)?$("#tabExtendedattributesLI,#tabExtendedattributes").addClass("hide"):$("#tabExtendedattributesLI,#tabExtendedattributes").removeClass("hide"),setHTMLEditors(),setDatePickers(".tab-content .datepicker",dtLocale),setColorPickers(".tab-content .mura-colorpicker"),setFinders(".tab-content .mura-ckfinder,.tab-content .mura-finder"),setToolTips(".tab-content"),setFileSelectors()},checkExtendSetTargeting:function(){var t=$(".extendset"),e=!1,i=!1,a=!0;if(t.length){for(var n=0;n<t.length;n++){var o=t[n];if(null!=o.getAttribute("categoryid")&&""!=o.getAttribute("categoryid")){if(!i){var r=document.form1.categoryID;i=!0}for(var s=0;s<r.length;s++){var l=r[s],c=r[s].value,d=o.getAttribute("categoryid");!e&&null!=c&&d.indexOf(c)>-1&&(e=!0,membership=l.checked)}e&&membership?(userManager.setFormElementsDisplay(o,""),o.style.display="",a=!1):(userManager.setFormElementsDisplay(o,"none"),o.style.display="none")}else userManager.setFormElementsDisplay(o,""),o.style.display="",a=!1;e=!1}a?($("#extendMessage").show(),$("#extendDL").hide()):($("#extendMessage").hide(),$("#extendDL").show())}},resetExtendedAttributes:function(t,e,i,a,n,o){this.loadExtendedAttributes(t,e,i,a,n,o)},setFormElementsDisplay:function(t,e){var i=t.getElementsByTagName("input");if(i.length)for(var a=0;a<i.length;a++)i[a].style.display=e;if((i=t.getElementsByTagName("textarea")).length)for(a=0;a<i.length;a++)i[a].style.display=e;if((i=t.getElementsByTagName("select")).length)for(a=0;a<i.length;a++)i[a].style.display=e}}}]);